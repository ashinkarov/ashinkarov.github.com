<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="A. Šinkarovs, T. Koopman, S. Scholz">
  <meta name="dcterms.date" content="2023-09-04">
  <title>Rank-Polymorphism for Shape-Guided Blocking</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reset.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/reveal.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@^4//dist/theme/white.css" id="theme">
  <link rel="stylesheet" href="Agda.css"/>
  <link rel="stylesheet" href="my.css"/>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Rank-Polymorphism for Shape-Guided Blocking</h1>
  <p class="author"><u>A. Šinkarovs</u>, T. Koopman, S. Scholz</p>
  <p class="date">04 September 2023</p>
</section>

<section class="slide level2">

<!-- 
This is to make reveal.js local, but MathJax is not
picked up locally...

revealjs-url: ./reveal.js

-->
<!--
# Motivation

## Running Example

. . .

<div style="font-size: .85em;"/>
```c
mm_naive (const size_t p, const size_t q, const size_t r,
          const double (*a)[p][q], const double (*b)[q][r],
          double (*c)[p][r])
{
  #pragma omp parallel for
  for (size_t i = 0; i < p; i++)
    for (size_t j = 0; j < r; j++) {
      (*c)[i][j] = 0.;
      for (size_t k = 0; k < q; k++)
        (*c)[i][j] += (*a)[i][k] * (*b)[k][j];
    }
}
```
</div>

. . .

Performance of this code is

. . .

**terrible** ---  12Gflops/s vs 1300Gflops/s achieved by OpenBLAS

## Why OpenBLAS is fast?

```bash
$ cd OpenBLAS/kernel 
```
. . .

```bash
$ ls generic/gemm*.c | wc -l
19
$ ls generic/gemm*.c | xargs cat | wc -l
3986
```
. . . 

```bash
$ ls x86_64/dgemm*.S | wc -l  
16
$ ls x86_64/dgemm* | xargs cat | wc -l 
47459
```

. . .

```bash
$ expr 3986 + 47459
51445
```

## 

<center>
<img width="50%" src="img/cat.gif"/ >
</center>


## Why OpenBLAS is fast?

* Implements blocked matrix multiplication
* Hand-written Assembly kernels for 
  each supported architecture
* Smart choice of blocking factors (10K loc in Assembly) 

-->
<div style="font-size: 7em;">
<p><b>F<span style="color:#888;">HPNC</span></b></p>
</div>
</section>
<section id="the-plan" class="title-slide slide level1">
<h1>The Plan</h1>
<ul>
<li>High-level algorithm specification</li>
<li>Correctness guarantees</li>
<li>Blocking without major reimplementation</li>
</ul>
</section>

<section>
<section id="array-theory" class="title-slide slide level1">
<h1>Array Theory</h1>
<!--
<pre class="Agda"><a id="1710" class="Keyword">open</a> <a id="1715" class="Keyword">import</a> <a id="1722" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="1731" class="Keyword">open</a> <a id="1736" class="Keyword">import</a> <a id="1743" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="1752" class="Symbol">as</a> <a id="1755" class="Module">Fin</a> <a id="1759" class="Keyword">using</a> <a id="1765" class="Symbol">(</a><a id="1766" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a><a id="1769" class="Symbol">;</a> <a id="1771" href="Data.Fin.Base.html#1157" class="InductiveConstructor">zero</a><a id="1775" class="Symbol">;</a> <a id="1777" href="Data.Fin.Base.html#1188" class="InductiveConstructor">suc</a><a id="1780" class="Symbol">;</a> <a id="1782" href="Data.Fin.Base.html#4399" class="Function">remQuot</a><a id="1789" class="Symbol">;</a> <a id="1791" href="Data.Fin.Base.html#4509" class="Function">combine</a><a id="1798" class="Symbol">;</a> <a id="1800" href="Data.Fin.Base.html#1261" class="Function">toℕ</a><a id="1803" class="Symbol">;</a> <a id="1805" href="Data.Fin.Base.html#4152" class="Function">quotRem</a><a id="1812" class="Symbol">)</a>
<a id="1814" class="Keyword">open</a> <a id="1819" class="Keyword">import</a> <a id="1826" href="Data.Fin.Properties.html" class="Module">Data.Fin.Properties</a> <a id="1846" class="Symbol">as</a> <a id="1849" class="Module">Fin</a> <a id="1853" class="Keyword">using</a> <a id="1859" class="Symbol">(</a><a id="1860" href="Data.Fin.Properties.html#19100" class="Function">remQuot-combine</a><a id="1875" class="Symbol">;</a> <a id="1877" href="Data.Fin.Properties.html#19394" class="Function">combine-remQuot</a><a id="1892" class="Symbol">)</a>
<a id="1894" class="Keyword">open</a> <a id="1899" class="Keyword">import</a> <a id="1906" href="Data.Product.html" class="Module">Data.Product</a> <a id="1919" class="Symbol">as</a> <a id="1922" class="Module">Prod</a> <a id="1927" class="Keyword">hiding</a> <a id="1934" class="Symbol">(</a><a id="1935" href="Data.Product.html#2495" class="Function">map</a><a id="1938" class="Symbol">)</a>
<a id="1940" class="Keyword">open</a> <a id="1945" class="Keyword">import</a> <a id="1952" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1990" class="Keyword">hiding</a> <a id="1997" class="Symbol">(</a><a id="1998" href="Relation.Binary.PropositionalEquality.html#2365" class="InductiveConstructor Operator">[_]</a><a id="2001" class="Symbol">)</a>
<a id="2003" class="Keyword">open</a> <a id="2008" class="Keyword">import</a> <a id="2015" href="Function.html" class="Module">Function</a>
<a id="2024" class="Keyword">open</a> <a id="2029" class="Keyword">import</a> <a id="2036" href="Category.Monad.html" class="Module">Category.Monad</a>
<a id="2051" class="Keyword">open</a> <a id="2056" class="Keyword">import</a> <a id="2063" href="Data.List.html" class="Module">Data.List</a> <a id="2073" class="Keyword">hiding</a> <a id="2080" class="Symbol">(</a><a id="2081" href="Data.List.Base.html#5034" class="Function Operator">[_]</a><a id="2084" class="Symbol">;</a> <a id="2086" href="Data.List.Base.html#1553" class="Function">map</a><a id="2089" class="Symbol">;</a> <a id="2091" href="Data.List.Base.html#2819" class="Function">zipWith</a><a id="2098" class="Symbol">;</a> <a id="2100" href="Data.List.Base.html#3579" class="Function">zip</a><a id="2103" class="Symbol">;</a> <a id="2105" href="Data.List.Base.html#3708" class="Function">unzip</a><a id="2110" class="Symbol">;</a> <a id="2112" href="Data.List.Base.html#4793" class="Function">sum</a><a id="2115" class="Symbol">)</a>
<a id="2117" class="Keyword">open</a> <a id="2122" class="Keyword">import</a> <a id="2129" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="2167" class="Symbol">as</a> <a id="2170" class="Module">Eq</a> <a id="2173" class="Keyword">hiding</a> <a id="2180" class="Symbol">(</a><a id="2181" href="Relation.Binary.PropositionalEquality.html#2365" class="InductiveConstructor Operator">[_]</a><a id="2184" class="Symbol">)</a>
<a id="2186" class="Keyword">open</a> <a id="2191" class="Keyword">import</a> <a id="2198" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="2214" class="Keyword">open</a> <a id="2219" class="Keyword">import</a> <a id="2226" href="Algebra.html" class="Module">Algebra</a>

<a id="2235" class="Keyword">pattern</a> <a id="#0"></a><a id="2243" href="present.html#2243" class="InductiveConstructor">#0</a> <a id="2246" class="Symbol">=</a> <a id="2248" class="InductiveConstructor">zero</a>
<a id="2253" class="Keyword">pattern</a> <a id="#1"></a><a id="2261" href="present.html#2261" class="InductiveConstructor">#1</a> <a id="2264" class="Symbol">=</a> <a id="2266" class="InductiveConstructor">suc</a> <a id="2270" href="present.html#2243" class="InductiveConstructor">#0</a>

<a id="2274" class="Keyword">pattern</a> <a id="[_]₁"></a><a id="2282" href="present.html#2282" class="InductiveConstructor Operator">[_]₁</a> <a id="2287" href="present.html#2291" class="Bound">x</a> <a id="2289" class="Symbol">=</a> <a id="2291" href="present.html#2291" class="Bound">x</a> <a id="2293" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2295" class="InductiveConstructor">[]</a>
<a id="2298" class="Keyword">pattern</a> <a id="[_,_]₂"></a><a id="2306" href="present.html#2306" class="InductiveConstructor Operator">[_,_]₂</a> <a id="2313" href="present.html#2319" class="Bound">x</a> <a id="2315" href="present.html#2323" class="Bound">y</a> <a id="2317" class="Symbol">=</a> <a id="2319" href="present.html#2319" class="Bound">x</a> <a id="2321" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2323" href="present.html#2323" class="Bound">y</a> <a id="2325" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2327" class="InductiveConstructor">[]</a>
<a id="2330" class="Keyword">pattern</a> <a id="[_,_,_]₃"></a><a id="2338" href="present.html#2338" class="InductiveConstructor Operator">[_,_,_]₃</a> <a id="2347" href="present.html#2355" class="Bound">x</a> <a id="2349" href="present.html#2359" class="Bound">y</a> <a id="2351" href="present.html#2363" class="Bound">z</a> <a id="2353" class="Symbol">=</a> <a id="2355" href="present.html#2355" class="Bound">x</a> <a id="2357" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2359" href="present.html#2359" class="Bound">y</a> <a id="2361" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2363" href="present.html#2363" class="Bound">z</a> <a id="2365" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2367" class="InductiveConstructor">[]</a>
<a id="2370" class="Keyword">pattern</a> <a id="[_,_,_,_]₄"></a><a id="2378" href="present.html#2378" class="InductiveConstructor Operator">[_,_,_,_]₄</a> <a id="2389" href="present.html#2399" class="Bound">x</a> <a id="2391" href="present.html#2403" class="Bound">y</a> <a id="2393" href="present.html#2407" class="Bound">z</a> <a id="2395" href="present.html#2411" class="Bound">w</a> <a id="2397" class="Symbol">=</a> <a id="2399" href="present.html#2399" class="Bound">x</a> <a id="2401" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2403" href="present.html#2403" class="Bound">y</a> <a id="2405" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2407" href="present.html#2407" class="Bound">z</a> <a id="2409" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2411" href="present.html#2411" class="Bound">w</a> <a id="2413" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2415" class="InductiveConstructor">[]</a>
<a id="2418" class="Keyword">pattern</a> <a id="[_,_,_,_,_]₅"></a><a id="2426" href="present.html#2426" class="InductiveConstructor Operator">[_,_,_,_,_]₅</a> <a id="2439" href="present.html#2451" class="Bound">x</a> <a id="2441" href="present.html#2455" class="Bound">y</a> <a id="2443" href="present.html#2459" class="Bound">z</a> <a id="2445" href="present.html#2463" class="Bound">w</a> <a id="2447" href="present.html#2467" class="Bound">s</a> <a id="2449" class="Symbol">=</a> <a id="2451" href="present.html#2451" class="Bound">x</a> <a id="2453" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2455" href="present.html#2455" class="Bound">y</a> <a id="2457" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2459" href="present.html#2459" class="Bound">z</a> <a id="2461" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2463" href="present.html#2463" class="Bound">w</a> <a id="2465" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2467" href="present.html#2467" class="Bound">s</a> <a id="2469" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2471" class="InductiveConstructor">[]</a>


<a id="2476" class="Keyword">private</a> <a id="2484" class="Keyword">variable</a>
  <a id="2495" href="present.html#2495" class="Generalizable">m</a> <a id="2497" href="present.html#2497" class="Generalizable">n</a> <a id="2499" href="present.html#2499" class="Generalizable">k</a> <a id="2501" class="Symbol">:</a> <a id="2503" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="2507" href="present.html#2507" class="Generalizable">X</a> <a id="2509" href="present.html#2509" class="Generalizable">Y</a> <a id="2511" href="present.html#2511" class="Generalizable">Z</a> <a id="2513" class="Symbol">:</a> <a id="2515" href="Agda.Primitive.html#320" class="Primitive">Set</a>

<a id="2520" class="Keyword">postulate</a>
  <a id="⋯"></a><a id="2532" href="present.html#2532" class="Postulate">⋯</a> <a id="2534" class="Symbol">:</a> <a id="2536" class="Symbol">∀</a> <a id="2538" class="Symbol">{</a><a id="2539" href="present.html#2539" class="Bound">a</a><a id="2540" class="Symbol">}{</a><a id="2542" href="present.html#2542" class="Bound">X</a> <a id="2544" class="Symbol">:</a> <a id="2546" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2550" href="present.html#2539" class="Bound">a</a><a id="2551" class="Symbol">}</a> <a id="2553" class="Symbol">→</a> <a id="2555" href="present.html#2542" class="Bound">X</a>

</pre>-->
<div style="font-size: 1.1em;">
<pre class="Agda"><a id="2604" class="Keyword">data</a> <a id="S"></a><a id="2609" href="present.html#2609" class="Datatype">S</a> <a id="2611" class="Symbol">:</a> <a id="2613" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2617" class="Keyword">where</a>
  <a id="S.ι"></a><a id="2625" href="present.html#2625" class="InductiveConstructor">ι</a>    <a id="2630" class="Symbol">:</a> <a id="2632" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="2634" class="Symbol">→</a> <a id="2636" href="present.html#2609" class="Datatype">S</a>
  <a id="S._⊗_"></a><a id="2640" href="present.html#2640" class="InductiveConstructor Operator">_⊗_</a>  <a id="2645" class="Symbol">:</a> <a id="2647" href="present.html#2609" class="Datatype">S</a> <a id="2649" class="Symbol">→</a> <a id="2651" href="present.html#2609" class="Datatype">S</a> <a id="2653" class="Symbol">→</a> <a id="2655" href="present.html#2609" class="Datatype">S</a>

<a id="2658" class="Keyword">data</a> <a id="P"></a><a id="2663" href="present.html#2663" class="Datatype">P</a> <a id="2665" class="Symbol">:</a> <a id="2667" href="present.html#2609" class="Datatype">S</a> <a id="2669" class="Symbol">→</a> <a id="2671" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2675" class="Keyword">where</a>
  <a id="P.ι"></a><a id="2683" href="present.html#2683" class="InductiveConstructor">ι</a>    <a id="2688" class="Symbol">:</a> <a id="2690" href="Data.Fin.Base.html#1135" class="Datatype">Fin</a> <a id="2694" href="present.html#2497" class="Generalizable">n</a> <a id="2696" class="Symbol">→</a> <a id="2698" href="present.html#2663" class="Datatype">P</a> <a id="2700" class="Symbol">(</a><a id="2701" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="2703" href="present.html#2497" class="Generalizable">n</a><a id="2704" class="Symbol">)</a>
  <a id="P._⊗_"></a><a id="2708" href="present.html#2708" class="InductiveConstructor Operator">_⊗_</a>  <a id="2713" class="Symbol">:</a> <a id="2715" class="Symbol">∀</a> <a id="2717" class="Symbol">{</a><a id="2718" href="present.html#2718" class="Bound">s</a> <a id="2720" href="present.html#2720" class="Bound">p</a><a id="2721" class="Symbol">}</a> <a id="2723" class="Symbol">→</a> <a id="2725" href="present.html#2663" class="Datatype">P</a> <a id="2727" href="present.html#2718" class="Bound">s</a> <a id="2729" class="Symbol">→</a> <a id="2731" href="present.html#2663" class="Datatype">P</a> <a id="2733" href="present.html#2720" class="Bound">p</a> <a id="2735" class="Symbol">→</a> <a id="2737" href="present.html#2663" class="Datatype">P</a> <a id="2739" class="Symbol">(</a><a id="2740" href="present.html#2718" class="Bound">s</a> <a id="2742" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="2744" href="present.html#2720" class="Bound">p</a><a id="2745" class="Symbol">)</a>

<a id="Ar"></a><a id="2748" href="present.html#2748" class="Function">Ar</a> <a id="2751" class="Symbol">:</a> <a id="2753" href="present.html#2609" class="Datatype">S</a> <a id="2755" class="Symbol">→</a> <a id="2757" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2761" class="Symbol">→</a> <a id="2763" href="Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="2767" href="present.html#2748" class="Function">Ar</a> <a id="2770" href="present.html#2770" class="Bound">s</a> <a id="2772" href="present.html#2772" class="Bound">X</a> <a id="2774" class="Symbol">=</a> <a id="2776" href="present.html#2663" class="Datatype">P</a> <a id="2778" href="present.html#2770" class="Bound">s</a> <a id="2780" class="Symbol">→</a> <a id="2782" href="present.html#2772" class="Bound">X</a>
</pre>
</div>
<!--
<pre class="Agda"><a id="2805" class="Keyword">variable</a>
  <a id="2816" href="present.html#2816" class="Generalizable">s</a> <a id="2818" href="present.html#2818" class="Generalizable">p</a> <a id="2820" href="present.html#2820" class="Generalizable">q</a> <a id="2822" href="present.html#2822" class="Generalizable">r</a> <a id="2824" href="present.html#2824" class="Generalizable">u</a> <a id="2826" href="present.html#2826" class="Generalizable">v</a> <a id="2828" href="present.html#2828" class="Generalizable">w</a> <a id="2830" class="Symbol">:</a> <a id="2832" href="present.html#2609" class="Datatype">S</a>
<a id="2834" class="Keyword">infixl</a> <a id="2841" class="Number">10</a> <a id="2844" href="present.html#2640" class="InductiveConstructor Operator">_⊗_</a>
</pre>-->
</section>
<section id="immediate-operations-1" class="slide level2">
<h2>Immediate Operations (1)</h2>
<div style="font-size: 1.1em;">
<pre class="Agda"><a id="_[_]"></a><a id="2923" href="present.html#2923" class="Function Operator">_[_]</a>  <a id="2929" class="Symbol">:</a> <a id="2931" href="present.html#2748" class="Function">Ar</a> <a id="2934" href="present.html#2816" class="Generalizable">s</a> <a id="2936" href="present.html#2507" class="Generalizable">X</a> <a id="2938" class="Symbol">→</a> <a id="2940" class="Symbol">(</a><a id="2941" href="present.html#2663" class="Datatype">P</a> <a id="2943" href="present.html#2816" class="Generalizable">s</a> <a id="2945" class="Symbol">→</a> <a id="2947" href="present.html#2507" class="Generalizable">X</a><a id="2948" class="Symbol">)</a>
<a id="2950" href="present.html#2950" class="Bound">a</a> <a id="2952" href="present.html#2923" class="Function Operator">[</a> <a id="2954" href="present.html#2954" class="Bound">ix</a> <a id="2957" href="present.html#2923" class="Function Operator">]</a> <a id="2959" class="Symbol">=</a> <a id="2961" href="present.html#2950" class="Bound">a</a> <a id="2963" href="present.html#2954" class="Bound">ix</a>

<a id="nest"></a><a id="2967" href="present.html#2967" class="Function">nest</a> <a id="2972" class="Symbol">:</a> <a id="2974" href="present.html#2748" class="Function">Ar</a> <a id="2977" class="Symbol">(</a><a id="2978" href="present.html#2816" class="Generalizable">s</a> <a id="2980" class="InductiveConstructor Operator">⊗</a> <a id="2982" href="present.html#2818" class="Generalizable">p</a><a id="2983" class="Symbol">)</a> <a id="2985" href="present.html#2507" class="Generalizable">X</a> <a id="2987" class="Symbol">→</a> <a id="2989" href="present.html#2748" class="Function">Ar</a> <a id="2992" href="present.html#2816" class="Generalizable">s</a> <a id="2994" class="Symbol">(</a><a id="2995" href="present.html#2748" class="Function">Ar</a> <a id="2998" href="present.html#2818" class="Generalizable">p</a> <a id="3000" href="present.html#2507" class="Generalizable">X</a><a id="3001" class="Symbol">)</a>
<a id="3003" href="present.html#2967" class="Function">nest</a> <a id="3008" href="present.html#3008" class="Bound">a</a> <a id="3010" href="present.html#3010" class="Bound">i</a> <a id="3012" href="present.html#3012" class="Bound">j</a> <a id="3014" class="Symbol">=</a> <a id="3016" href="present.html#3008" class="Bound">a</a> <a id="3018" href="present.html#2923" class="Function Operator">[</a> <a id="3020" href="present.html#3010" class="Bound">i</a> <a id="3022" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="3024" href="present.html#3012" class="Bound">j</a> <a id="3026" href="present.html#2923" class="Function Operator">]</a>

<a id="unnest"></a><a id="3029" href="present.html#3029" class="Function">unnest</a> <a id="3036" class="Symbol">:</a> <a id="3038" href="present.html#2748" class="Function">Ar</a> <a id="3041" href="present.html#2816" class="Generalizable">s</a> <a id="3043" class="Symbol">(</a><a id="3044" href="present.html#2748" class="Function">Ar</a> <a id="3047" href="present.html#2818" class="Generalizable">p</a> <a id="3049" href="present.html#2507" class="Generalizable">X</a><a id="3050" class="Symbol">)</a> <a id="3052" class="Symbol">→</a> <a id="3054" href="present.html#2748" class="Function">Ar</a> <a id="3057" class="Symbol">(</a><a id="3058" href="present.html#2816" class="Generalizable">s</a> <a id="3060" class="InductiveConstructor Operator">⊗</a> <a id="3062" href="present.html#2818" class="Generalizable">p</a><a id="3063" class="Symbol">)</a> <a id="3065" href="present.html#2507" class="Generalizable">X</a>
<a id="3067" href="present.html#3029" class="Function">unnest</a> <a id="3074" href="present.html#3074" class="Bound">a</a> <a id="3076" class="Symbol">(</a><a id="3077" href="present.html#3077" class="Bound">i</a> <a id="3079" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="3081" href="present.html#3081" class="Bound">j</a><a id="3082" class="Symbol">)</a> <a id="3084" class="Symbol">=</a> <a id="3086" href="present.html#3074" class="Bound">a</a> <a id="3088" href="present.html#2923" class="Function Operator">[</a> <a id="3090" href="present.html#3077" class="Bound">i</a> <a id="3092" href="present.html#2923" class="Function Operator">]</a> <a id="3094" href="present.html#2923" class="Function Operator">[</a> <a id="3096" href="present.html#3081" class="Bound">j</a> <a id="3098" href="present.html#2923" class="Function Operator">]</a>
</pre>
</div>
</section>
<section id="immediate-operations-2" class="slide level2">
<h2>Immediate Operations (2)</h2>
<div style="font-size: 1.1em;">
<pre class="Agda"><a id="K"></a><a id="3179" href="present.html#3179" class="Function">K</a> <a id="3181" class="Symbol">:</a> <a id="3183" href="present.html#2507" class="Generalizable">X</a> <a id="3185" class="Symbol">→</a> <a id="3187" href="present.html#2748" class="Function">Ar</a> <a id="3190" href="present.html#2816" class="Generalizable">s</a> <a id="3192" href="present.html#2507" class="Generalizable">X</a>
<a id="3194" href="present.html#3179" class="Function">K</a> <a id="3196" href="present.html#3196" class="Bound">x</a> <a id="3198" class="Symbol">=</a> <a id="3200" class="Symbol">λ</a> <a id="3202" href="present.html#3202" class="Bound">i</a> <a id="3204" class="Symbol">→</a> <a id="3206" href="present.html#3196" class="Bound">x</a>

<a id="map"></a><a id="3209" href="present.html#3209" class="Function">map</a> <a id="3213" class="Symbol">:</a> <a id="3215" class="Symbol">(</a><a id="3216" href="present.html#2507" class="Generalizable">X</a> <a id="3218" class="Symbol">→</a> <a id="3220" href="present.html#2509" class="Generalizable">Y</a><a id="3221" class="Symbol">)</a> <a id="3223" class="Symbol">→</a>  <a id="3226" href="present.html#2748" class="Function">Ar</a> <a id="3229" href="present.html#2816" class="Generalizable">s</a> <a id="3231" href="present.html#2507" class="Generalizable">X</a> <a id="3233" class="Symbol">→</a> <a id="3235" href="present.html#2748" class="Function">Ar</a> <a id="3238" href="present.html#2816" class="Generalizable">s</a> <a id="3240" href="present.html#2509" class="Generalizable">Y</a>
<a id="3242" href="present.html#3209" class="Function">map</a> <a id="3246" href="present.html#3246" class="Bound">f</a> <a id="3248" href="present.html#3248" class="Bound">a</a> <a id="3250" class="Symbol">=</a> <a id="3252" href="present.html#3246" class="Bound">f</a> <a id="3254" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3256" href="present.html#3248" class="Bound">a</a> <a id="3258" href="present.html#2923" class="Function Operator">[_]</a>

<a id="zipWith"></a><a id="3263" href="present.html#3263" class="Function">zipWith</a> <a id="3271" class="Symbol">:</a> <a id="3273" class="Symbol">(</a><a id="3274" href="present.html#2507" class="Generalizable">X</a> <a id="3276" class="Symbol">→</a> <a id="3278" href="present.html#2509" class="Generalizable">Y</a> <a id="3280" class="Symbol">→</a> <a id="3282" href="present.html#2511" class="Generalizable">Z</a><a id="3283" class="Symbol">)</a> 
        <a id="3294" class="Symbol">→</a> <a id="3296" href="present.html#2748" class="Function">Ar</a> <a id="3299" href="present.html#2816" class="Generalizable">s</a> <a id="3301" href="present.html#2507" class="Generalizable">X</a> <a id="3303" class="Symbol">→</a> <a id="3305" href="present.html#2748" class="Function">Ar</a> <a id="3308" href="present.html#2816" class="Generalizable">s</a> <a id="3310" href="present.html#2509" class="Generalizable">Y</a> <a id="3312" class="Symbol">→</a> <a id="3314" href="present.html#2748" class="Function">Ar</a> <a id="3317" href="present.html#2816" class="Generalizable">s</a> <a id="3319" href="present.html#2511" class="Generalizable">Z</a>
<a id="3321" href="present.html#3263" class="Function">zipWith</a> <a id="3329" href="present.html#3329" class="Bound">f</a> <a id="3331" href="present.html#3331" class="Bound">a</a> <a id="3333" href="present.html#3333" class="Bound">b</a> <a id="3335" class="Symbol">=</a> <a id="3337" class="Symbol">λ</a> <a id="3339" href="present.html#3339" class="Bound">i</a> <a id="3341" class="Symbol">→</a> <a id="3343" href="present.html#3329" class="Bound">f</a> <a id="3345" class="Symbol">(</a><a id="3346" href="present.html#3331" class="Bound">a</a> <a id="3348" href="present.html#2923" class="Function Operator">[</a> <a id="3350" href="present.html#3339" class="Bound">i</a> <a id="3352" href="present.html#2923" class="Function Operator">]</a><a id="3353" class="Symbol">)</a> <a id="3355" class="Symbol">(</a><a id="3356" href="present.html#3333" class="Bound">b</a> <a id="3358" href="present.html#2923" class="Function Operator">[</a> <a id="3360" href="present.html#3339" class="Bound">i</a> <a id="3362" href="present.html#2923" class="Function Operator">]</a><a id="3363" class="Symbol">)</a>

<a id="_≈ₐ_"></a><a id="3366" href="present.html#3366" class="Function Operator">_≈ₐ_</a> <a id="3371" class="Symbol">:</a> <a id="3373" class="Symbol">(</a><a id="3374" href="present.html#2748" class="Function">Ar</a> <a id="3377" href="present.html#2816" class="Generalizable">s</a> <a id="3379" href="present.html#2507" class="Generalizable">X</a><a id="3380" class="Symbol">)</a> <a id="3382" class="Symbol">→</a> <a id="3384" class="Symbol">(</a><a id="3385" href="present.html#2748" class="Function">Ar</a> <a id="3388" href="present.html#2816" class="Generalizable">s</a> <a id="3390" href="present.html#2507" class="Generalizable">X</a><a id="3391" class="Symbol">)</a> <a id="3393" class="Symbol">→</a> <a id="3395" href="Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="3399" href="present.html#3399" class="Bound">a</a> <a id="3401" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="3404" href="present.html#3404" class="Bound">b</a> <a id="3406" class="Symbol">=</a> <a id="3408" class="Symbol">∀</a> <a id="3410" href="present.html#3410" class="Bound">ix</a> <a id="3413" class="Symbol">→</a> <a id="3415" href="present.html#3399" class="Bound">a</a> <a id="3417" href="present.html#2923" class="Function Operator">[</a> <a id="3419" href="present.html#3410" class="Bound">ix</a> <a id="3422" href="present.html#2923" class="Function Operator">]</a> <a id="3424" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3426" href="present.html#3404" class="Bound">b</a> <a id="3428" href="present.html#2923" class="Function Operator">[</a> <a id="3430" href="present.html#3410" class="Bound">ix</a> <a id="3433" href="present.html#2923" class="Function Operator">]</a>
</pre>
</div>
<!--
<pre class="Agda"><a id="S′"></a><a id="3456" href="present.html#3456" class="Function">S′</a> <a id="3459" class="Symbol">:</a> <a id="3461" class="Symbol">∀</a> <a id="3463" class="Symbol">{</a><a id="3464" href="present.html#3464" class="Bound">s</a> <a id="3466" href="present.html#3466" class="Bound">p</a><a id="3467" class="Symbol">}</a> <a id="3469" class="Symbol">→</a> <a id="3471" href="present.html#2748" class="Function">Ar</a> <a id="3474" href="present.html#3464" class="Bound">s</a> <a id="3476" class="Symbol">(</a><a id="3477" href="present.html#2748" class="Function">Ar</a> <a id="3480" href="present.html#3466" class="Bound">p</a> <a id="3482" href="present.html#2507" class="Generalizable">X</a><a id="3483" class="Symbol">)</a> <a id="3485" class="Symbol">→</a> <a id="3487" class="Symbol">(</a><a id="3488" href="present.html#2663" class="Datatype">P</a> <a id="3490" href="present.html#3464" class="Bound">s</a> <a id="3492" class="Symbol">→</a> <a id="3494" href="present.html#2663" class="Datatype">P</a> <a id="3496" href="present.html#3466" class="Bound">p</a><a id="3497" class="Symbol">)</a> <a id="3499" class="Symbol">→</a> <a id="3501" class="Symbol">(</a><a id="3502" href="present.html#2748" class="Function">Ar</a> <a id="3505" href="present.html#3464" class="Bound">s</a> <a id="3507" href="present.html#2507" class="Generalizable">X</a><a id="3508" class="Symbol">)</a>
<a id="3510" href="present.html#3456" class="Function">S′</a> <a id="3513" href="present.html#3513" class="Bound">f</a> <a id="3515" href="present.html#3515" class="Bound">g</a> <a id="3517" class="Symbol">=</a> <a id="3519" class="Symbol">λ</a> <a id="3521" href="present.html#3521" class="Bound">i</a> <a id="3523" class="Symbol">→</a> <a id="3525" href="present.html#3513" class="Bound">f</a> <a id="3527" href="present.html#2923" class="Function Operator">[</a> <a id="3529" href="present.html#3521" class="Bound">i</a> <a id="3531" href="present.html#2923" class="Function Operator">]</a> <a id="3533" href="present.html#2923" class="Function Operator">[</a> <a id="3535" href="present.html#3515" class="Bound">g</a> <a id="3537" href="present.html#3521" class="Bound">i</a> <a id="3539" href="present.html#2923" class="Function Operator">]</a>

<a id="unzip"></a><a id="3542" href="present.html#3542" class="Function">unzip</a> <a id="3548" class="Symbol">:</a> <a id="3550" class="Symbol">∀</a> <a id="3552" class="Symbol">{</a><a id="3553" href="present.html#3553" class="Bound">s</a><a id="3554" class="Symbol">}</a> <a id="3556" class="Symbol">→</a> <a id="3558" href="present.html#2748" class="Function">Ar</a> <a id="3561" href="present.html#3553" class="Bound">s</a> <a id="3563" class="Symbol">(</a><a id="3564" href="present.html#2507" class="Generalizable">X</a> <a id="3566" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3568" href="present.html#2509" class="Generalizable">Y</a><a id="3569" class="Symbol">)</a> <a id="3571" class="Symbol">→</a> <a id="3573" href="present.html#2748" class="Function">Ar</a> <a id="3576" href="present.html#3553" class="Bound">s</a> <a id="3578" href="present.html#2507" class="Generalizable">X</a> <a id="3580" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="3582" href="present.html#2748" class="Function">Ar</a> <a id="3585" href="present.html#3553" class="Bound">s</a> <a id="3587" href="present.html#2509" class="Generalizable">Y</a>
<a id="3589" href="present.html#3542" class="Function">unzip</a> <a id="3595" href="present.html#3595" class="Bound">f</a> <a id="3597" class="Symbol">=</a> <a id="3599" href="present.html#3209" class="Function">map</a> <a id="3603" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="3609" href="present.html#3595" class="Bound">f</a> <a id="3611" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3613" href="present.html#3209" class="Function">map</a> <a id="3617" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="3623" href="present.html#3595" class="Bound">f</a>


<a id="refl-≈ₐ"></a><a id="3627" href="present.html#3627" class="Function">refl-≈ₐ</a>   <a id="3637" class="Symbol">:</a> <a id="3639" class="Symbol">∀</a> <a id="3641" class="Symbol">{</a><a id="3642" href="present.html#3642" class="Bound">s</a> <a id="3644" href="present.html#3644" class="Bound">X</a><a id="3645" class="Symbol">}{</a><a id="3647" href="present.html#3647" class="Bound">a</a> <a id="3649" class="Symbol">:</a> <a id="3651" href="present.html#2748" class="Function">Ar</a> <a id="3654" href="present.html#3642" class="Bound">s</a> <a id="3656" href="present.html#3644" class="Bound">X</a><a id="3657" class="Symbol">}</a> <a id="3659" class="Symbol">→</a> <a id="3661" href="present.html#3647" class="Bound">a</a> <a id="3663" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="3666" href="present.html#3647" class="Bound">a</a>
<a id="sym-≈ₐ"></a><a id="3668" href="present.html#3668" class="Function">sym-≈ₐ</a>    <a id="3678" class="Symbol">:</a> <a id="3680" class="Symbol">∀</a> <a id="3682" class="Symbol">{</a><a id="3683" href="present.html#3683" class="Bound">s</a> <a id="3685" href="present.html#3685" class="Bound">X</a><a id="3686" class="Symbol">}{</a><a id="3688" href="present.html#3688" class="Bound">a</a> <a id="3690" href="present.html#3690" class="Bound">b</a> <a id="3692" class="Symbol">:</a> <a id="3694" href="present.html#2748" class="Function">Ar</a> <a id="3697" href="present.html#3683" class="Bound">s</a> <a id="3699" href="present.html#3685" class="Bound">X</a><a id="3700" class="Symbol">}</a> <a id="3702" class="Symbol">→</a> <a id="3704" href="present.html#3688" class="Bound">a</a> <a id="3706" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="3709" href="present.html#3690" class="Bound">b</a> <a id="3711" class="Symbol">→</a> <a id="3713" href="present.html#3690" class="Bound">b</a> <a id="3715" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="3718" href="present.html#3688" class="Bound">a</a>
<a id="trans-≈ₐ"></a><a id="3720" href="present.html#3720" class="Function">trans-≈ₐ</a>  <a id="3730" class="Symbol">:</a> <a id="3732" class="Symbol">∀</a> <a id="3734" class="Symbol">{</a><a id="3735" href="present.html#3735" class="Bound">s</a> <a id="3737" href="present.html#3737" class="Bound">X</a><a id="3738" class="Symbol">}{</a><a id="3740" href="present.html#3740" class="Bound">a</a> <a id="3742" href="present.html#3742" class="Bound">b</a> <a id="3744" href="present.html#3744" class="Bound">c</a> <a id="3746" class="Symbol">:</a> <a id="3748" href="present.html#2748" class="Function">Ar</a> <a id="3751" href="present.html#3735" class="Bound">s</a> <a id="3753" href="present.html#3737" class="Bound">X</a><a id="3754" class="Symbol">}</a> <a id="3756" class="Symbol">→</a> <a id="3758" href="present.html#3740" class="Bound">a</a> <a id="3760" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="3763" href="present.html#3742" class="Bound">b</a> <a id="3765" class="Symbol">→</a> <a id="3767" href="present.html#3742" class="Bound">b</a> <a id="3769" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="3772" href="present.html#3744" class="Bound">c</a> <a id="3774" class="Symbol">→</a> <a id="3776" href="present.html#3740" class="Bound">a</a> <a id="3778" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="3781" href="present.html#3744" class="Bound">c</a>
<a id="3783" class="Comment">-- This is surely something that we do not have (without funExt)</a>
<a id="3848" class="Comment">--cong-≈-≡ : ∀ {s X Y} (f : Ar s X → Y)</a>
<a id="3888" class="Comment">--         → ∀ {a b : Ar s X} → (a ≈ₐ b) → f a ≡ f b</a>
<a id="3941" class="Comment">--cong-≈-≡ f {a} {b} a≈b = ?</a>
<a id="3970" href="present.html#3627" class="Function">refl-≈ₐ</a> <a id="3978" href="present.html#3978" class="Bound">ix</a> <a id="3981" class="Symbol">=</a> <a id="3983" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
<a id="3988" href="present.html#3668" class="Function">sym-≈ₐ</a> <a id="3995" href="present.html#3995" class="Bound">a≈b</a> <a id="3999" href="present.html#3999" class="Bound">ix</a> <a id="4002" class="Symbol">=</a> <a id="4004" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="4008" class="Symbol">(</a><a id="4009" href="present.html#3995" class="Bound">a≈b</a> <a id="4013" href="present.html#3999" class="Bound">ix</a><a id="4015" class="Symbol">)</a>
<a id="4017" href="present.html#3720" class="Function">trans-≈ₐ</a> <a id="4026" href="present.html#4026" class="Bound">a≈b</a> <a id="4030" href="present.html#4030" class="Bound">b≈c</a> <a id="4034" href="present.html#4034" class="Bound">ix</a> <a id="4037" class="Symbol">=</a> <a id="4039" href="Relation.Binary.PropositionalEquality.Core.html#1738" class="Function">trans</a> <a id="4045" class="Symbol">(</a><a id="4046" href="present.html#4026" class="Bound">a≈b</a> <a id="4050" href="present.html#4034" class="Bound">ix</a><a id="4052" class="Symbol">)</a> <a id="4054" class="Symbol">(</a><a id="4055" href="present.html#4030" class="Bound">b≈c</a> <a id="4059" href="present.html#4034" class="Bound">ix</a><a id="4061" class="Symbol">)</a>

<a id="trans-≡-≈"></a><a id="4064" href="present.html#4064" class="Function">trans-≡-≈</a> <a id="4074" class="Symbol">:</a> <a id="4076" class="Symbol">∀</a> <a id="4078" class="Symbol">{</a><a id="4079" href="present.html#4079" class="Bound">s</a> <a id="4081" href="present.html#4081" class="Bound">X</a><a id="4082" class="Symbol">}{</a><a id="4084" href="present.html#4084" class="Bound">a</a> <a id="4086" href="present.html#4086" class="Bound">b</a> <a id="4088" href="present.html#4088" class="Bound">c</a> <a id="4090" class="Symbol">:</a> <a id="4092" href="present.html#2748" class="Function">Ar</a> <a id="4095" href="present.html#4079" class="Bound">s</a> <a id="4097" href="present.html#4081" class="Bound">X</a><a id="4098" class="Symbol">}</a> <a id="4100" class="Symbol">→</a> <a id="4102" href="present.html#4084" class="Bound">a</a> <a id="4104" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="4106" href="present.html#4086" class="Bound">b</a> <a id="4108" class="Symbol">→</a> <a id="4110" href="present.html#4086" class="Bound">b</a> <a id="4112" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="4115" href="present.html#4088" class="Bound">c</a> <a id="4117" class="Symbol">→</a> <a id="4119" href="present.html#4084" class="Bound">a</a> <a id="4121" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="4124" href="present.html#4088" class="Bound">c</a>
<a id="4126" href="present.html#4064" class="Function">trans-≡-≈</a> <a id="4136" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="4141" href="present.html#4141" class="Bound">x</a> <a id="4143" class="Symbol">=</a> <a id="4145" href="present.html#4141" class="Bound">x</a>

<a id="4148" class="Keyword">import</a> <a id="4155" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="4188" class="Symbol">as</a> <a id="4191" class="Module">EqReasoning</a>

<a id="≈ₐ-isEquiv"></a><a id="4204" href="present.html#4204" class="Function">≈ₐ-isEquiv</a> <a id="4215" class="Symbol">:</a> <a id="4217" class="Symbol">∀</a> <a id="4219" class="Symbol">{</a><a id="4220" href="present.html#4220" class="Bound">s</a> <a id="4222" href="present.html#4222" class="Bound">X</a><a id="4223" class="Symbol">}</a> <a id="4225" class="Symbol">→</a> <a id="4227" href="Relation.Binary.Structures.html#1531" class="Record">IsEquivalence</a> <a id="4241" class="Symbol">(</a><a id="4242" href="present.html#3366" class="Function Operator">_≈ₐ_</a> <a id="4247" class="Symbol">{</a><a id="4248" href="present.html#4220" class="Bound">s</a><a id="4249" class="Symbol">}</a> <a id="4251" class="Symbol">{</a><a id="4252" href="present.html#4222" class="Bound">X</a><a id="4253" class="Symbol">})</a>
<a id="4256" href="present.html#4204" class="Function">≈ₐ-isEquiv</a> <a id="4267" class="Symbol">=</a> <a id="4269" class="Keyword">record</a> <a id="4276" class="Symbol">{</a> <a id="4278" href="Relation.Binary.Structures.html#1577" class="Field">refl</a> <a id="4283" class="Symbol">=</a> <a id="4285" href="present.html#3627" class="Function">refl-≈ₐ</a> <a id="4293" class="Symbol">;</a> <a id="4295" href="Relation.Binary.Structures.html#1603" class="Field">sym</a> <a id="4299" class="Symbol">=</a> <a id="4301" href="present.html#3668" class="Function">sym-≈ₐ</a> <a id="4308" class="Symbol">;</a> <a id="4310" href="Relation.Binary.Structures.html#1629" class="Field">trans</a> <a id="4316" class="Symbol">=</a> <a id="4318" href="present.html#3720" class="Function">trans-≈ₐ</a><a id="4326" class="Symbol">}</a>

<a id="ArSetoid"></a><a id="4329" href="present.html#4329" class="Function">ArSetoid</a> <a id="4338" class="Symbol">:</a> <a id="4340" class="Symbol">∀</a> <a id="4342" class="Symbol">{</a><a id="4343" href="present.html#4343" class="Bound">s</a> <a id="4345" href="present.html#4345" class="Bound">X</a><a id="4346" class="Symbol">}</a> <a id="4348" class="Symbol">→</a> <a id="4350" href="Relation.Binary.Bundles.html#1018" class="Record">Setoid</a> <a id="4357" class="Symbol">_</a> <a id="4359" class="Symbol">_</a>
<a id="4361" href="present.html#4329" class="Function">ArSetoid</a> <a id="4370" class="Symbol">{</a><a id="4371" href="present.html#4371" class="Bound">s</a><a id="4372" class="Symbol">}</a> <a id="4374" class="Symbol">{</a><a id="4375" href="present.html#4375" class="Bound">X</a><a id="4376" class="Symbol">}</a> <a id="4378" class="Symbol">=</a> <a id="4380" class="Keyword">record</a> <a id="4387" class="Symbol">{</a> <a id="4389" href="Relation.Binary.Bundles.html#1141" class="Field">isEquivalence</a> <a id="4403" class="Symbol">=</a> <a id="4405" href="present.html#4204" class="Function">≈ₐ-isEquiv</a> <a id="4416" class="Symbol">{</a><a id="4417" href="present.html#4371" class="Bound">s</a><a id="4418" class="Symbol">}</a> <a id="4420" class="Symbol">{</a><a id="4421" href="present.html#4375" class="Bound">X</a><a id="4422" class="Symbol">}}</a>

<a id="4426" class="Keyword">module</a> <a id="ArReasoning"></a><a id="4433" href="present.html#4433" class="Module">ArReasoning</a> <a id="4445" class="Symbol">{</a><a id="4446" href="present.html#4446" class="Bound">s</a><a id="4447" class="Symbol">}</a> <a id="4449" class="Symbol">{</a><a id="4450" href="present.html#4450" class="Bound">X</a><a id="4451" class="Symbol">}</a> <a id="4453" class="Symbol">=</a> <a id="4455" href="Relation.Binary.Reasoning.Setoid.html" class="Module">EqReasoning</a> <a id="4467" class="Symbol">(</a><a id="4468" href="present.html#4329" class="Function">ArSetoid</a> <a id="4477" class="Symbol">{</a><a id="4478" href="present.html#4446" class="Bound">s</a><a id="4479" class="Symbol">}</a> <a id="4481" class="Symbol">{</a><a id="4482" href="present.html#4450" class="Bound">X</a><a id="4483" class="Symbol">})</a>
</pre>-->
</section>
<section id="canonical-mm" class="slide level2">
<h2>Canonical mm</h2>
<div style="font-size: 1.1em;">
<pre class="Agda"><a id="4548" class="Keyword">module</a> <a id="MMnaive"></a><a id="4555" href="present.html#4555" class="Module">MMnaive</a>
  <a id="4565" class="Symbol">(</a><a id="4566" href="present.html#4566" class="Bound Operator">_⊠_</a> <a id="4570" class="Symbol">:</a> <a id="4572" href="present.html#2507" class="Generalizable">X</a> <a id="4574" class="Symbol">→</a> <a id="4576" href="present.html#2509" class="Generalizable">Y</a> <a id="4578" class="Symbol">→</a> <a id="4580" href="present.html#2511" class="Generalizable">Z</a><a id="4581" class="Symbol">)</a> <a id="4583" class="Symbol">(</a><a id="4584" href="present.html#4584" class="Bound">ε</a> <a id="4586" class="Symbol">:</a> <a id="4588" href="present.html#2511" class="Generalizable">Z</a><a id="4589" class="Symbol">)</a> <a id="4591" class="Symbol">(</a><a id="4592" href="present.html#4592" class="Bound Operator">_⊞_</a> <a id="4596" class="Symbol">:</a> <a id="4598" href="present.html#2511" class="Generalizable">Z</a> <a id="4600" class="Symbol">→</a> <a id="4602" href="present.html#2511" class="Generalizable">Z</a> <a id="4604" class="Symbol">→</a> <a id="4606" href="present.html#2511" class="Generalizable">Z</a><a id="4607" class="Symbol">)</a>
  <a id="4611" class="Symbol">(</a><a id="4612" href="present.html#4612" class="Bound">sum</a> <a id="4616" class="Symbol">:</a> <a id="4618" class="Symbol">∀</a> <a id="4620" class="Symbol">{</a><a id="4621" href="present.html#4621" class="Bound">X</a> <a id="4623" href="present.html#4623" class="Bound">s</a><a id="4624" class="Symbol">}</a> <a id="4626" class="Symbol">→</a> <a id="4628" class="Symbol">(</a><a id="4629" href="present.html#4621" class="Bound">X</a> <a id="4631" class="Symbol">→</a> <a id="4633" href="present.html#4621" class="Bound">X</a> <a id="4635" class="Symbol">→</a> <a id="4637" href="present.html#4621" class="Bound">X</a><a id="4638" class="Symbol">)</a> <a id="4640" class="Symbol">→</a> <a id="4642" href="present.html#4621" class="Bound">X</a> <a id="4644" class="Symbol">→</a> <a id="4646" href="present.html#2748" class="Function">Ar</a> <a id="4649" href="present.html#4623" class="Bound">s</a> <a id="4651" href="present.html#4621" class="Bound">X</a> <a id="4653" class="Symbol">→</a> <a id="4655" href="present.html#4621" class="Bound">X</a><a id="4656" class="Symbol">)</a>
</pre>
<!--
<pre class="Agda">    <a id="4675" class="Symbol">(</a><a id="4676" class="Keyword">let</a> <a id="4680" class="Keyword">infixl</a> <a id="4687" class="Number">10</a> _⊠_<a id="4693" class="Symbol">;</a> <a id="4695" href="present.html#4695" class="Bound Operator">_⊠_</a> <a id="4699" class="Symbol">=</a> <a id="4701" href="present.html#4566" class="Bound Operator">_⊠_</a><a id="4704" class="Symbol">)</a> <a id="4706" class="Keyword">where</a>
</pre>-->
<pre class="Agda">  <a id="MMnaive.mm-canon"></a><a id="4726" href="present.html#4726" class="Function">mm-canon</a> <a id="4735" class="Symbol">:</a> <a id="4737" href="present.html#2748" class="Function">Ar</a> <a id="4740" class="Symbol">(</a><a id="4741" href="present.html#2816" class="Generalizable">s</a> <a id="4743" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="4745" href="present.html#2818" class="Generalizable">p</a><a id="4746" class="Symbol">)</a> <a id="4748" href="present.html#4572" class="Bound">X</a>
           <a id="4761" class="Symbol">→</a> <a id="4763" href="present.html#2748" class="Function">Ar</a> <a id="4766" class="Symbol">(</a><a id="4767" href="present.html#2818" class="Generalizable">p</a> <a id="4769" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="4771" href="present.html#2820" class="Generalizable">q</a><a id="4772" class="Symbol">)</a> <a id="4774" href="present.html#4576" class="Bound">Y</a>
           <a id="4787" class="Symbol">→</a> <a id="4789" href="present.html#2748" class="Function">Ar</a> <a id="4792" class="Symbol">(</a><a id="4793" href="present.html#2816" class="Generalizable">s</a> <a id="4795" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="4797" href="present.html#2820" class="Generalizable">q</a><a id="4798" class="Symbol">)</a> <a id="4800" href="present.html#4580" class="Bound">Z</a>
  <a id="4804" href="present.html#4726" class="Function">mm-canon</a> <a id="4813" href="present.html#4813" class="Bound">a</a> <a id="4815" href="present.html#4815" class="Bound">b</a> <a id="4817" class="Symbol">(</a><a id="4818" href="present.html#4818" class="Bound">i</a> <a id="4820" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="4822" href="present.html#4822" class="Bound">j</a><a id="4823" class="Symbol">)</a>
    <a id="4829" class="Symbol">=</a> <a id="4831" href="present.html#4612" class="Bound">sum</a> <a id="4835" href="present.html#4592" class="Bound Operator">_⊞_</a> <a id="4839" href="present.html#4584" class="Bound">ε</a> <a id="4841" class="Symbol">(λ</a> <a id="4844" href="present.html#4844" class="Bound">k</a> <a id="4846" class="Symbol">→</a> <a id="4848" href="present.html#4813" class="Bound">a</a> <a id="4850" href="present.html#2923" class="Function Operator">[</a> <a id="4852" href="present.html#4818" class="Bound">i</a> <a id="4854" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="4856" href="present.html#4844" class="Bound">k</a> <a id="4858" href="present.html#2923" class="Function Operator">]</a> <a id="4860" href="present.html#4695" class="Bound Operator">⊠</a> <a id="4862" href="present.html#4815" class="Bound">b</a> <a id="4864" href="present.html#2923" class="Function Operator">[</a> <a id="4866" href="present.html#4844" class="Bound">k</a> <a id="4868" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="4870" href="present.html#4822" class="Bound">j</a> <a id="4872" href="present.html#2923" class="Function Operator">]</a><a id="4873" class="Symbol">)</a>
</pre>
</div>
<div class="fragment">
<p><code>mm-canon</code> is rank-polymorphic</p>
</div>
</section>
<section id="blocking-1" class="slide level2">
<h2>Blocking (1)</h2>
<!--
<pre class="Agda"><a id="4953" class="Keyword">module</a> <a id="Blocking"></a><a id="4960" href="present.html#4960" class="Module">Blocking</a> <a id="4969" class="Keyword">where</a>
</pre>-->
<div style="font-size: 0.8em;">
<p><span class="math display">\[
\begin{pmatrix}
a &amp; a &amp; a &amp; a &amp; a &amp; a \\
b &amp; b &amp; b &amp; b &amp; b &amp; b \\
c &amp; c &amp; c &amp; c &amp; c &amp; c \\
d &amp; d &amp; d &amp; d &amp; d &amp; d
\end{pmatrix}
\Rightarrow
\left(
\begin{array}{c c c | c c c}
a &amp; a &amp; a &amp; a &amp; a &amp; a \\
b &amp; b &amp; b &amp; b &amp; b &amp; b \\
\hline
c &amp; c &amp; c &amp; c &amp; c &amp; c \\
d &amp; d &amp; d &amp; d &amp; d &amp; d
\end{array}
\right)
\]</span></p>
</div>
<pre class="Agda">  <a id="Blocking.block"></a><a id="5334" href="present.html#5334" class="Function">block</a>   <a id="5342" class="Symbol">:</a> <a id="5344" href="present.html#2748" class="Function">Ar</a> <a id="5347" class="Symbol">((</a><a id="5349" href="present.html#2816" class="Generalizable">s</a> <a id="5351" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5353" href="present.html#2818" class="Generalizable">p</a><a id="5354" class="Symbol">)</a> <a id="5356" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5358" class="Symbol">(</a><a id="5359" href="present.html#2820" class="Generalizable">q</a> <a id="5361" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5363" href="present.html#2822" class="Generalizable">r</a><a id="5364" class="Symbol">))</a> <a id="5367" href="present.html#2507" class="Generalizable">X</a> 
          <a id="5380" class="Symbol">→</a> <a id="5382" href="present.html#2748" class="Function">Ar</a> <a id="5385" class="Symbol">((</a><a id="5387" href="present.html#2816" class="Generalizable">s</a> <a id="5389" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5391" href="present.html#2820" class="Generalizable">q</a><a id="5392" class="Symbol">)</a> <a id="5394" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5396" class="Symbol">(</a><a id="5397" href="present.html#2818" class="Generalizable">p</a> <a id="5399" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5401" href="present.html#2822" class="Generalizable">r</a><a id="5402" class="Symbol">))</a> <a id="5405" href="present.html#2507" class="Generalizable">X</a>
  <a id="5409" href="present.html#5334" class="Function">block</a> <a id="5415" href="present.html#5415" class="Bound">a</a> <a id="5417" class="Symbol">((</a><a id="5419" href="present.html#5419" class="Bound">i</a> <a id="5421" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5423" href="present.html#5423" class="Bound">j</a><a id="5424" class="Symbol">)</a> <a id="5426" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5428" class="Symbol">(</a><a id="5429" href="present.html#5429" class="Bound">k</a> <a id="5431" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5433" href="present.html#5433" class="Bound">l</a><a id="5434" class="Symbol">))</a> 
      <a id="5444" class="Symbol">=</a> <a id="5446" href="present.html#5415" class="Bound">a</a> <a id="5448" href="present.html#2923" class="Function Operator">[</a><a id="5449" class="Symbol">(</a><a id="5450" href="present.html#5419" class="Bound">i</a> <a id="5452" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5454" href="present.html#5429" class="Bound">k</a><a id="5455" class="Symbol">)</a> <a id="5457" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5459" class="Symbol">(</a><a id="5460" href="present.html#5423" class="Bound">j</a> <a id="5462" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5464" href="present.html#5433" class="Bound">l</a><a id="5465" class="Symbol">)</a><a id="5466" href="present.html#2923" class="Function Operator">]</a>

  <a id="Blocking.unblock"></a><a id="5471" href="present.html#5471" class="Function">unblock</a> <a id="5479" class="Symbol">:</a> <a id="5481" href="present.html#2748" class="Function">Ar</a> <a id="5484" class="Symbol">((</a><a id="5486" href="present.html#2816" class="Generalizable">s</a> <a id="5488" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5490" href="present.html#2820" class="Generalizable">q</a><a id="5491" class="Symbol">)</a> <a id="5493" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5495" class="Symbol">(</a><a id="5496" href="present.html#2818" class="Generalizable">p</a> <a id="5498" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5500" href="present.html#2822" class="Generalizable">r</a><a id="5501" class="Symbol">))</a> <a id="5504" href="present.html#2507" class="Generalizable">X</a>
          <a id="5516" class="Symbol">→</a> <a id="5518" href="present.html#2748" class="Function">Ar</a> <a id="5521" class="Symbol">((</a><a id="5523" href="present.html#2816" class="Generalizable">s</a> <a id="5525" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5527" href="present.html#2818" class="Generalizable">p</a><a id="5528" class="Symbol">)</a> <a id="5530" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5532" class="Symbol">(</a><a id="5533" href="present.html#2820" class="Generalizable">q</a> <a id="5535" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5537" href="present.html#2822" class="Generalizable">r</a><a id="5538" class="Symbol">))</a> <a id="5541" href="present.html#2507" class="Generalizable">X</a>
  <a id="5545" href="present.html#5471" class="Function">unblock</a> <a id="5553" class="Symbol">=</a> <a id="5555" href="present.html#5334" class="Function">block</a>
</pre>
</section>
<section id="blocking-2" class="slide level2">
<h2>Blocking (2)</h2>
<div style="font-size: 0.8em;">
<p><span class="math display">\[
\begin{pmatrix}
a &amp; a &amp; a &amp; a &amp; a &amp; a \\
b &amp; b &amp; b &amp; b &amp; b &amp; b \\
c &amp; c &amp; c &amp; c &amp; c &amp; c \\
d &amp; d &amp; d &amp; d &amp; d &amp; d
\end{pmatrix}
\Rightarrow
\left(
\begin{array}{c c | c c | c c}
a &amp; a &amp; a &amp; a &amp; a &amp; a \\
b &amp; b &amp; b &amp; b &amp; b &amp; b \\
c &amp; c &amp; c &amp; c &amp; c &amp; c \\
d &amp; d &amp; d &amp; d &amp; d &amp; d
\end{array}
\right)
\]</span></p>
</div>
<pre class="Agda">  <a id="Blocking.blockᵥ"></a><a id="5929" href="present.html#5929" class="Function">blockᵥ</a> <a id="5936" class="Symbol">:</a> <a id="5938" href="present.html#2748" class="Function">Ar</a> <a id="5941" class="Symbol">(</a><a id="5942" href="present.html#2816" class="Generalizable">s</a> <a id="5944" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5946" class="Symbol">(</a><a id="5947" href="present.html#2818" class="Generalizable">p</a> <a id="5949" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5951" href="present.html#2820" class="Generalizable">q</a><a id="5952" class="Symbol">))</a> <a id="5955" href="present.html#2507" class="Generalizable">X</a> <a id="5957" class="Symbol">→</a> <a id="5959" href="present.html#2748" class="Function">Ar</a> <a id="5962" class="Symbol">(</a><a id="5963" href="present.html#2818" class="Generalizable">p</a> <a id="5965" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5967" class="Symbol">(</a><a id="5968" href="present.html#2816" class="Generalizable">s</a> <a id="5970" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="5972" href="present.html#2820" class="Generalizable">q</a><a id="5973" class="Symbol">))</a> <a id="5976" href="present.html#2507" class="Generalizable">X</a>
  <a id="5980" href="present.html#5929" class="Function">blockᵥ</a> <a id="5987" href="present.html#5987" class="Bound">a</a> <a id="5989" class="Symbol">(</a><a id="5990" href="present.html#5990" class="Bound">i</a> <a id="5992" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5994" class="Symbol">(</a><a id="5995" href="present.html#5995" class="Bound">j</a> <a id="5997" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="5999" href="present.html#5999" class="Bound">k</a><a id="6000" class="Symbol">))</a> <a id="6003" class="Symbol">=</a> <a id="6005" href="present.html#5987" class="Bound">a</a> <a id="6007" href="present.html#2923" class="Function Operator">[</a> <a id="6009" href="present.html#5995" class="Bound">j</a> <a id="6011" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6013" class="Symbol">(</a><a id="6014" href="present.html#5990" class="Bound">i</a> <a id="6016" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6018" href="present.html#5999" class="Bound">k</a><a id="6019" class="Symbol">)</a> <a id="6021" href="present.html#2923" class="Function Operator">]</a>

  <a id="Blocking.unblockᵥ"></a><a id="6026" href="present.html#6026" class="Function">unblockᵥ</a> <a id="6035" class="Symbol">:</a> <a id="6037" href="present.html#2748" class="Function">Ar</a> <a id="6040" class="Symbol">(</a><a id="6041" href="present.html#2818" class="Generalizable">p</a> <a id="6043" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6045" class="Symbol">(</a><a id="6046" href="present.html#2816" class="Generalizable">s</a> <a id="6048" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6050" href="present.html#2820" class="Generalizable">q</a><a id="6051" class="Symbol">))</a> <a id="6054" href="present.html#2507" class="Generalizable">X</a> <a id="6056" class="Symbol">→</a> <a id="6058" href="present.html#2748" class="Function">Ar</a> <a id="6061" class="Symbol">(</a><a id="6062" href="present.html#2816" class="Generalizable">s</a> <a id="6064" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6066" class="Symbol">(</a><a id="6067" href="present.html#2818" class="Generalizable">p</a> <a id="6069" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6071" href="present.html#2820" class="Generalizable">q</a><a id="6072" class="Symbol">))</a> <a id="6075" href="present.html#2507" class="Generalizable">X</a>
  <a id="6079" href="present.html#6026" class="Function">unblockᵥ</a> <a id="6088" class="Symbol">=</a> <a id="6090" href="present.html#5929" class="Function">blockᵥ</a>
</pre>
</section>
<section id="blocking-3" class="slide level2">
<h2>Blocking (3)</h2>
<div style="font-size: 0.8em;">
<p><span class="math display">\[
\begin{pmatrix}
a &amp; a &amp; a &amp; a &amp; a &amp; a \\
b &amp; b &amp; b &amp; b &amp; b &amp; b \\
c &amp; c &amp; c &amp; c &amp; c &amp; c \\
d &amp; d &amp; d &amp; d &amp; d &amp; d
\end{pmatrix}
\Rightarrow
\left(
\begin{array}{c c c c c c}
a &amp; a &amp; a &amp; a &amp; a &amp; a \\
b &amp; b &amp; b &amp; b &amp; b &amp; b \\
\hline
c &amp; c &amp; c &amp; c &amp; c &amp; c \\
d &amp; d &amp; d &amp; d &amp; d &amp; d
\end{array}
\right)
\]</span></p>
</div>
<pre class="Agda">  <a id="Blocking.blockₕ"></a><a id="6468" href="present.html#6468" class="Function">blockₕ</a>   <a id="6477" class="Symbol">:</a> <a id="6479" href="present.html#2748" class="Function">Ar</a> <a id="6482" class="Symbol">((</a><a id="6484" href="present.html#2816" class="Generalizable">s</a> <a id="6486" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6488" href="present.html#2818" class="Generalizable">p</a><a id="6489" class="Symbol">)</a> <a id="6491" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6493" href="present.html#2820" class="Generalizable">q</a><a id="6494" class="Symbol">)</a> <a id="6496" href="present.html#2507" class="Generalizable">X</a> <a id="6498" class="Symbol">→</a> <a id="6500" href="present.html#2748" class="Function">Ar</a> <a id="6503" class="Symbol">(</a><a id="6504" href="present.html#2816" class="Generalizable">s</a> <a id="6506" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6508" class="Symbol">(</a><a id="6509" href="present.html#2818" class="Generalizable">p</a> <a id="6511" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6513" href="present.html#2820" class="Generalizable">q</a><a id="6514" class="Symbol">))</a> <a id="6517" href="present.html#2507" class="Generalizable">X</a>
  <a id="6521" href="present.html#6468" class="Function">blockₕ</a> <a id="6528" href="present.html#6528" class="Bound">a</a> <a id="6530" class="Symbol">(</a><a id="6531" href="present.html#6531" class="Bound">i</a> <a id="6533" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6535" class="Symbol">(</a><a id="6536" href="present.html#6536" class="Bound">j</a> <a id="6538" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6540" href="present.html#6540" class="Bound">k</a><a id="6541" class="Symbol">))</a> <a id="6544" class="Symbol">=</a> <a id="6546" href="present.html#6528" class="Bound">a</a> <a id="6548" href="present.html#2923" class="Function Operator">[</a> <a id="6550" class="Symbol">(</a><a id="6551" href="present.html#6531" class="Bound">i</a> <a id="6553" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6555" href="present.html#6536" class="Bound">j</a><a id="6556" class="Symbol">)</a> <a id="6558" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6560" href="present.html#6540" class="Bound">k</a> <a id="6562" href="present.html#2923" class="Function Operator">]</a>

  <a id="Blocking.unblockₕ"></a><a id="6567" href="present.html#6567" class="Function">unblockₕ</a> <a id="6576" class="Symbol">:</a> <a id="6578" href="present.html#2748" class="Function">Ar</a> <a id="6581" class="Symbol">(</a><a id="6582" href="present.html#2816" class="Generalizable">s</a> <a id="6584" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6586" class="Symbol">(</a><a id="6587" href="present.html#2818" class="Generalizable">p</a> <a id="6589" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6591" href="present.html#2820" class="Generalizable">q</a><a id="6592" class="Symbol">))</a> <a id="6595" href="present.html#2507" class="Generalizable">X</a> <a id="6597" class="Symbol">→</a> <a id="6599" href="present.html#2748" class="Function">Ar</a> <a id="6602" class="Symbol">((</a><a id="6604" href="present.html#2816" class="Generalizable">s</a> <a id="6606" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6608" href="present.html#2818" class="Generalizable">p</a><a id="6609" class="Symbol">)</a> <a id="6611" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="6613" href="present.html#2820" class="Generalizable">q</a><a id="6614" class="Symbol">)</a> <a id="6616" href="present.html#2507" class="Generalizable">X</a>
  <a id="6620" href="present.html#6567" class="Function">unblockₕ</a> <a id="6629" href="present.html#6629" class="Bound">a</a> <a id="6631" class="Symbol">((</a><a id="6633" href="present.html#6633" class="Bound">i</a> <a id="6635" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6637" href="present.html#6637" class="Bound">j</a><a id="6638" class="Symbol">)</a> <a id="6640" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6642" href="present.html#6642" class="Bound">k</a><a id="6643" class="Symbol">)</a> <a id="6645" class="Symbol">=</a> <a id="6647" href="present.html#6629" class="Bound">a</a> <a id="6649" href="present.html#2923" class="Function Operator">[</a> <a id="6651" href="present.html#6633" class="Bound">i</a> <a id="6653" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6655" class="Symbol">(</a><a id="6656" href="present.html#6637" class="Bound">j</a> <a id="6658" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="6660" href="present.html#6642" class="Bound">k</a><a id="6661" class="Symbol">)</a> <a id="6663" href="present.html#2923" class="Function Operator">]</a>
</pre>
</section></section>
<section>
<section id="blocked-mm" class="title-slide slide level1">
<h1>Blocked mm</h1>
<div style="font-size: 0.9em;">
<!--
<pre class="Agda"><a id="6725" class="Keyword">module</a> <a id="Blocked"></a><a id="6732" href="present.html#6732" class="Module">Blocked</a>
   <a id="6743" class="Symbol">(</a><a id="6744" href="present.html#6744" class="Bound Operator">_⊠_</a> <a id="6748" class="Symbol">:</a> <a id="6750" href="present.html#2507" class="Generalizable">X</a> <a id="6752" class="Symbol">→</a> <a id="6754" href="present.html#2509" class="Generalizable">Y</a> <a id="6756" class="Symbol">→</a> <a id="6758" href="present.html#2511" class="Generalizable">Z</a><a id="6759" class="Symbol">)</a> <a id="6761" class="Symbol">(</a><a id="6762" href="present.html#6762" class="Bound">ε</a> <a id="6764" class="Symbol">:</a> <a id="6766" href="present.html#2511" class="Generalizable">Z</a><a id="6767" class="Symbol">)</a> <a id="6769" class="Symbol">(</a><a id="6770" href="present.html#6770" class="Bound Operator">_⊞_</a> <a id="6774" class="Symbol">:</a> <a id="6776" href="present.html#2511" class="Generalizable">Z</a> <a id="6778" class="Symbol">→</a> <a id="6780" href="present.html#2511" class="Generalizable">Z</a> <a id="6782" class="Symbol">→</a> <a id="6784" href="present.html#2511" class="Generalizable">Z</a><a id="6785" class="Symbol">)</a>
   <a id="6790" class="Symbol">(</a><a id="6791" href="present.html#6791" class="Bound">sum</a> <a id="6795" class="Symbol">:</a> <a id="6797" class="Symbol">∀</a> <a id="6799" class="Symbol">{</a><a id="6800" href="present.html#6800" class="Bound">X</a> <a id="6802" href="present.html#6802" class="Bound">s</a><a id="6803" class="Symbol">}</a> <a id="6805" class="Symbol">→</a> <a id="6807" class="Symbol">(</a><a id="6808" href="present.html#6800" class="Bound">X</a> <a id="6810" class="Symbol">→</a> <a id="6812" href="present.html#6800" class="Bound">X</a> <a id="6814" class="Symbol">→</a> <a id="6816" href="present.html#6800" class="Bound">X</a><a id="6817" class="Symbol">)</a> <a id="6819" class="Symbol">→</a> <a id="6821" href="present.html#6800" class="Bound">X</a> <a id="6823" class="Symbol">→</a> <a id="6825" href="present.html#2748" class="Function">Ar</a> <a id="6828" href="present.html#6802" class="Bound">s</a> <a id="6830" href="present.html#6800" class="Bound">X</a> <a id="6832" class="Symbol">→</a> <a id="6834" href="present.html#6800" class="Bound">X</a><a id="6835" class="Symbol">)</a>
   <a id="6840" class="Symbol">(</a><a id="6841" class="Keyword">let</a> <a id="6845" class="Keyword">infixl</a> <a id="6852" class="Number">10</a> _⊠_<a id="6858" class="Symbol">;</a> <a id="6860" href="present.html#6860" class="Bound Operator">_⊠_</a> <a id="6864" class="Symbol">=</a> <a id="6866" href="present.html#6744" class="Bound Operator">_⊠_</a><a id="6869" class="Symbol">)</a>
   <a id="6874" class="Symbol">(</a><a id="6875" class="Keyword">let</a> <a id="6879" class="Keyword">infixl</a> <a id="6886" class="Number">5</a> _⊞_<a id="6891" class="Symbol">;</a> <a id="6893" href="present.html#6893" class="Bound Operator">_⊞_</a> <a id="6897" class="Symbol">=</a> <a id="6899" href="present.html#6770" class="Bound Operator">_⊞_</a><a id="6902" class="Symbol">)</a> <a id="6904" class="Keyword">where</a>

  <a id="6913" class="Keyword">open</a> <a id="6918" href="present.html#4555" class="Module">MMnaive</a> <a id="6926" href="present.html#6860" class="Bound Operator">_⊠_</a> <a id="6930" href="present.html#6762" class="Bound">ε</a> <a id="6932" href="present.html#6893" class="Bound Operator">_⊞_</a> <a id="6936" href="present.html#6791" class="Bound">sum</a>
  <a id="6942" class="Keyword">open</a> <a id="6947" href="present.html#4960" class="Module">Blocking</a>

  <a id="Blocked.ni"></a><a id="6959" href="present.html#6959" class="Function">ni</a> <a id="6962" class="Symbol">:</a> <a id="6964" class="Symbol">(</a><a id="6965" href="present.html#6965" class="Bound">A</a> <a id="6967" class="Symbol">:</a> <a id="6969" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="6972" class="Symbol">)</a> <a id="6974" class="Symbol">→</a> <a id="6976" href="present.html#6965" class="Bound">A</a> <a id="6978" class="Symbol">→</a> <a id="6980" href="present.html#6965" class="Bound">A</a>
  <a id="6984" href="present.html#6959" class="Function">ni</a> <a id="6987" href="present.html#6987" class="Bound">A</a> <a id="6989" href="present.html#6989" class="Bound">a</a> <a id="6991" class="Symbol">=</a> <a id="6993" href="present.html#6989" class="Bound">a</a>

  <a id="6998" class="Keyword">infix</a> <a id="7004" class="Number">-2</a> <a id="7007" href="present.html#6959" class="Function">ni</a>
  <a id="7012" class="Keyword">syntax</a> <a id="7019" href="present.html#6959" class="Function">ni</a> <a id="7022" class="Bound">A</a> <a id="7024" class="Bound">e</a> <a id="7026" class="Symbol">=</a> <a id="7028" class="Bound">e</a> <a id="7030" class="Function">∶</a> <a id="7032" class="Bound">A</a>
</pre>-->
<pre class="Agda">  <a id="Blocked.mm"></a><a id="7048" href="present.html#7048" class="Function">mm</a> <a id="7051" class="Symbol">:</a> <a id="7053" href="present.html#2748" class="Function">Ar</a> <a id="7056" class="Symbol">(</a><a id="7057" href="present.html#2816" class="Generalizable">s</a> <a id="7059" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7061" href="present.html#2818" class="Generalizable">p</a><a id="7062" class="Symbol">)</a> <a id="7064" href="present.html#6750" class="Bound">X</a> <a id="7066" class="Symbol">→</a> <a id="7068" href="present.html#2748" class="Function">Ar</a> <a id="7071" class="Symbol">(</a><a id="7072" href="present.html#2818" class="Generalizable">p</a> <a id="7074" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7076" href="present.html#2820" class="Generalizable">q</a><a id="7077" class="Symbol">)</a> <a id="7079" href="present.html#6754" class="Bound">Y</a> <a id="7081" class="Symbol">→</a> <a id="7083" href="present.html#2748" class="Function">Ar</a> <a id="7086" class="Symbol">(</a><a id="7087" href="present.html#2816" class="Generalizable">s</a> <a id="7089" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7091" href="present.html#2820" class="Generalizable">q</a><a id="7092" class="Symbol">)</a> <a id="7094" href="present.html#6758" class="Bound">Z</a>

  <a id="7099" href="present.html#7048" class="Function">mm</a> <a id="7102" class="Symbol">{</a><a id="7103" class="Argument">s</a> <a id="7105" class="Symbol">=</a> <a id="7107" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7109" href="present.html#7109" class="Bound">m</a><a id="7110" class="Symbol">}</a> <a id="7112" class="Symbol">{</a><a id="7113" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7115" href="present.html#7115" class="Bound">n</a><a id="7116" class="Symbol">}</a> <a id="7118" class="Symbol">{</a><a id="7119" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7121" href="present.html#7121" class="Bound">k</a><a id="7122" class="Symbol">}</a> <a id="7124" class="Symbol">=</a> <a id="7126" href="present.html#4726" class="Function">mm-canon</a>

  <a id="7138" href="present.html#7048" class="Function">mm</a> <a id="7141" class="Symbol">{</a><a id="7142" class="Argument">s</a> <a id="7144" class="Symbol">=</a> <a id="7146" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7148" href="present.html#7148" class="Bound">m</a><a id="7149" class="Symbol">}</a> <a id="7151" class="Symbol">{</a><a id="7152" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7154" href="present.html#7154" class="Bound">n</a><a id="7155" class="Symbol">}</a> <a id="7157" class="Symbol">{</a><a id="7158" href="present.html#7158" class="Bound">p</a> <a id="7160" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7162" href="present.html#7162" class="Bound">q</a><a id="7163" class="Symbol">}</a> <a id="7165" href="present.html#7165" class="Bound">a</a> <a id="7167" href="present.html#7167" class="Bound">b</a> <a id="7169" class="Symbol">=</a>
    <a id="7175" class="Keyword">let</a> <a id="7179" href="present.html#7179" class="Bound">b′</a> <a id="7182" class="Symbol">=</a> <a id="7184" href="present.html#2967" class="Function">nest</a> <a id="7189" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7191" href="present.html#5929" class="Function">blockᵥ</a> <a id="7198" href="present.html#7167" class="Bound">b</a>  <a id="7201" href="present.html#6959" class="Function">∶</a> <a id="7203" href="present.html#2748" class="Function">Ar</a> <a id="7206" href="present.html#7158" class="Bound">p</a> <a id="7208" class="Symbol">(</a><a id="7209" href="present.html#2748" class="Function">Ar</a> <a id="7212" class="Symbol">(</a><a id="7213" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7215" href="present.html#7154" class="Bound">n</a> <a id="7217" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7219" href="present.html#7162" class="Bound">q</a><a id="7220" class="Symbol">)</a> <a id="7222" href="present.html#6754" class="Bound">Y</a><a id="7223" class="Symbol">)</a>
        <a id="7233" href="present.html#7233" class="Bound">c′</a> <a id="7236" class="Symbol">=</a> <a id="7238" href="present.html#3209" class="Function">map</a> <a id="7242" class="Symbol">(</a><a id="7243" href="present.html#7048" class="Function">mm</a> <a id="7246" href="present.html#7165" class="Bound">a</a><a id="7247" class="Symbol">)</a> <a id="7249" href="present.html#7179" class="Bound">b′</a>    <a id="7255" href="present.html#6959" class="Function">∶</a> <a id="7257" href="present.html#2748" class="Function">Ar</a> <a id="7260" href="present.html#7158" class="Bound">p</a> <a id="7262" class="Symbol">(</a><a id="7263" href="present.html#2748" class="Function">Ar</a> <a id="7266" class="Symbol">(</a><a id="7267" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7269" href="present.html#7148" class="Bound">m</a> <a id="7271" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7273" href="present.html#7162" class="Bound">q</a><a id="7274" class="Symbol">)</a> <a id="7276" href="present.html#6758" class="Bound">Z</a><a id="7277" class="Symbol">)</a>
    <a id="7283" class="Keyword">in</a>  <a id="7287" href="present.html#6026" class="Function">unblockᵥ</a> <a id="7296" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7298" href="present.html#3029" class="Function">unnest</a> <a id="7305" href="present.html#7233" class="Bound">c′</a>

  <a id="7311" href="present.html#7048" class="Function">mm</a> <a id="7314" class="Symbol">{</a><a id="7315" class="Argument">s</a> <a id="7317" class="Symbol">=</a> <a id="7319" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7321" href="present.html#7321" class="Bound">m</a><a id="7322" class="Symbol">}</a> <a id="7324" class="Symbol">{</a><a id="7325" href="present.html#7325" class="Bound">p</a> <a id="7327" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7329" href="present.html#7329" class="Bound">q</a><a id="7330" class="Symbol">}</a> <a id="7332" class="Symbol">{</a><a id="7333" href="present.html#7333" class="Bound">r</a> <a id="7335" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7337" href="present.html#7337" class="Bound">w</a><a id="7338" class="Symbol">}</a> <a id="7340" href="present.html#7340" class="Bound">a</a> <a id="7342" href="present.html#7342" class="Bound">b</a> <a id="7344" class="Symbol">=</a>
    <a id="7350" class="Keyword">let</a> <a id="7354" href="present.html#7354" class="Bound">a′</a> <a id="7357" class="Symbol">=</a> <a id="7359" href="present.html#2967" class="Function">nest</a> <a id="7364" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7366" href="present.html#5929" class="Function">blockᵥ</a> <a id="7373" href="present.html#7340" class="Bound">a</a>  <a id="7376" href="present.html#6959" class="Function">∶</a> <a id="7378" href="present.html#2748" class="Function">Ar</a> <a id="7381" href="present.html#7325" class="Bound">p</a> <a id="7383" class="Symbol">(</a><a id="7384" href="present.html#2748" class="Function">Ar</a> <a id="7387" class="Symbol">(</a><a id="7388" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7390" href="present.html#7321" class="Bound">m</a> <a id="7392" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7394" href="present.html#7329" class="Bound">q</a><a id="7395" class="Symbol">)</a> <a id="7397" href="present.html#6750" class="Bound">X</a><a id="7398" class="Symbol">)</a>
        <a id="7408" href="present.html#7408" class="Bound">b′</a> <a id="7411" class="Symbol">=</a> <a id="7413" href="present.html#2967" class="Function">nest</a> <a id="7418" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7420" href="present.html#5334" class="Function">block</a>  <a id="7427" href="present.html#7342" class="Bound">b</a>  <a id="7430" href="present.html#6959" class="Function">∶</a> <a id="7432" href="present.html#2748" class="Function">Ar</a> <a id="7435" class="Symbol">(</a><a id="7436" href="present.html#7325" class="Bound">p</a> <a id="7438" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7440" href="present.html#7333" class="Bound">r</a><a id="7441" class="Symbol">)</a> <a id="7443" class="Symbol">(</a><a id="7444" href="present.html#2748" class="Function">Ar</a> <a id="7447" class="Symbol">(</a><a id="7448" href="present.html#7329" class="Bound">q</a> <a id="7450" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7452" href="present.html#7337" class="Bound">w</a><a id="7453" class="Symbol">)</a> <a id="7455" href="present.html#6754" class="Bound">Y</a><a id="7456" class="Symbol">)</a>
        <a id="7466" href="present.html#7466" class="Bound">c′</a> <a id="7469" class="Symbol">=</a> <a id="7471" class="Symbol">λ</a> <a id="7473" href="present.html#7473" class="Bound">i</a> <a id="7475" class="Symbol">→</a> <a id="7477" href="present.html#6791" class="Bound">sum</a> <a id="7481" class="Symbol">(</a><a id="7482" href="present.html#3263" class="Function">zipWith</a> <a id="7490" href="present.html#6893" class="Bound Operator">_⊞_</a><a id="7493" class="Symbol">)</a> <a id="7495" class="Symbol">(</a><a id="7496" href="present.html#3179" class="Function">K</a> <a id="7498" href="present.html#6762" class="Bound">ε</a><a id="7499" class="Symbol">)</a>
                       <a id="7524" class="Symbol">λ</a> <a id="7526" href="present.html#7526" class="Bound">k</a> <a id="7528" class="Symbol">→</a> <a id="7530" href="present.html#7048" class="Function">mm</a> <a id="7533" class="Symbol">(</a><a id="7534" href="present.html#7354" class="Bound">a′</a> <a id="7537" href="present.html#2923" class="Function Operator">[</a> <a id="7539" href="present.html#7526" class="Bound">k</a> <a id="7541" href="present.html#2923" class="Function Operator">]</a><a id="7542" class="Symbol">)</a> <a id="7544" class="Symbol">(</a><a id="7545" href="present.html#7408" class="Bound">b′</a> <a id="7548" href="present.html#2923" class="Function Operator">[</a> <a id="7550" href="present.html#7526" class="Bound">k</a> <a id="7552" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="7554" href="present.html#7473" class="Bound">i</a> <a id="7556" href="present.html#2923" class="Function Operator">]</a><a id="7557" class="Symbol">)</a>
    <a id="7563" class="Keyword">in</a>  <a id="7567" href="present.html#6026" class="Function">unblockᵥ</a> <a id="7576" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7578" href="present.html#3029" class="Function">unnest</a> <a id="7585" href="present.html#7466" class="Bound">c′</a>

  <a id="7591" href="present.html#7048" class="CatchallClause Function">mm</a><a id="7593" class="CatchallClause"> </a><a id="7594" class="CatchallClause Symbol">_</a><a id="7595" class="CatchallClause"> </a><a id="7596" class="CatchallClause Symbol">_</a><a id="7597" class="CatchallClause"> </a><a id="7598" class="CatchallClause Symbol">_</a> <a id="7600" class="Symbol">=</a> <a id="7602" href="present.html#2532" class="Postulate">⋯</a>

</pre>
</div>
</section>
<section id="correctness" class="slide level2">
<h2>Correctness</h2>
<pre class="Agda"><a id="7637" class="Keyword">module</a> <a id="Proof"></a><a id="7644" href="present.html#7644" class="Module">Proof</a> 
  <a id="7653" class="Symbol">(</a><a id="7654" href="present.html#7654" class="Bound Operator">_⊠_</a> <a id="7658" class="Symbol">:</a> <a id="7660" href="present.html#2507" class="Generalizable">X</a> <a id="7662" class="Symbol">→</a> <a id="7664" href="present.html#2509" class="Generalizable">Y</a> <a id="7666" class="Symbol">→</a> <a id="7668" href="present.html#2511" class="Generalizable">Z</a><a id="7669" class="Symbol">)</a> <a id="7671" class="Symbol">(</a><a id="7672" href="present.html#7672" class="Bound">ε</a> <a id="7674" class="Symbol">:</a> <a id="7676" href="present.html#2511" class="Generalizable">Z</a><a id="7677" class="Symbol">)</a> <a id="7679" class="Symbol">(</a><a id="7680" href="present.html#7680" class="Bound Operator">_⊞_</a> <a id="7684" class="Symbol">:</a> <a id="7686" href="present.html#2511" class="Generalizable">Z</a> <a id="7688" class="Symbol">→</a> <a id="7690" href="present.html#2511" class="Generalizable">Z</a> <a id="7692" class="Symbol">→</a> <a id="7694" href="present.html#2511" class="Generalizable">Z</a><a id="7695" class="Symbol">)</a> <a id="7697" class="Keyword">where</a>

  <a id="Proof.sum₁"></a><a id="7706" href="present.html#7706" class="Function">sum₁</a> <a id="7711" class="Symbol">:</a> <a id="7713" class="Symbol">∀</a> <a id="7715" class="Symbol">{</a><a id="7716" href="present.html#7716" class="Bound">X</a><a id="7717" class="Symbol">}</a> <a id="7719" class="Symbol">→</a> <a id="7721" class="Symbol">(</a><a id="7722" href="present.html#7716" class="Bound">X</a> <a id="7724" class="Symbol">→</a> <a id="7726" href="present.html#7716" class="Bound">X</a> <a id="7728" class="Symbol">→</a> <a id="7730" href="present.html#7716" class="Bound">X</a><a id="7731" class="Symbol">)</a> <a id="7733" class="Symbol">→</a> <a id="7735" href="present.html#7716" class="Bound">X</a> <a id="7737" class="Symbol">→</a> <a id="7739" href="present.html#2748" class="Function">Ar</a> <a id="7742" class="Symbol">(</a><a id="7743" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7745" href="present.html#2497" class="Generalizable">n</a><a id="7746" class="Symbol">)</a> <a id="7748" href="present.html#7716" class="Bound">X</a> <a id="7750" class="Symbol">→</a> <a id="7752" href="present.html#7716" class="Bound">X</a>

  <a id="Proof.sum"></a><a id="7757" href="present.html#7757" class="Function">sum</a> <a id="7761" class="Symbol">:</a> <a id="7763" class="Symbol">∀</a> <a id="7765" class="Symbol">{</a><a id="7766" href="present.html#7766" class="Bound">X</a> <a id="7768" href="present.html#7768" class="Bound">s</a><a id="7769" class="Symbol">}</a> <a id="7771" class="Symbol">→</a> <a id="7773" class="Symbol">(</a><a id="7774" href="present.html#7766" class="Bound">X</a> <a id="7776" class="Symbol">→</a> <a id="7778" href="present.html#7766" class="Bound">X</a> <a id="7780" class="Symbol">→</a> <a id="7782" href="present.html#7766" class="Bound">X</a><a id="7783" class="Symbol">)</a> <a id="7785" class="Symbol">→</a> <a id="7787" href="present.html#7766" class="Bound">X</a> <a id="7789" class="Symbol">→</a> <a id="7791" href="present.html#2748" class="Function">Ar</a> <a id="7794" href="present.html#7768" class="Bound">s</a> <a id="7796" href="present.html#7766" class="Bound">X</a> <a id="7798" class="Symbol">→</a> <a id="7800" href="present.html#7766" class="Bound">X</a>
  <a id="7804" href="present.html#7757" class="Function">sum</a> <a id="7808" class="Symbol">{</a><a id="7809" class="Argument">s</a> <a id="7811" class="Symbol">=</a> <a id="7813" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="7815" href="present.html#7815" class="Bound">x</a><a id="7816" class="Symbol">}</a>   <a id="7820" href="present.html#7820" class="Bound">f</a> <a id="7822" href="present.html#7822" class="Bound">e</a> <a id="7824" href="present.html#7824" class="Bound">a</a> <a id="7826" class="Symbol">=</a> <a id="7828" href="present.html#7706" class="Function">sum₁</a> <a id="7833" href="present.html#7820" class="Bound">f</a> <a id="7835" href="present.html#7822" class="Bound">e</a> <a id="7837" href="present.html#7824" class="Bound">a</a>
  <a id="7841" href="present.html#7757" class="Function">sum</a> <a id="7845" class="Symbol">{</a><a id="7846" class="Argument">s</a> <a id="7848" class="Symbol">=</a> <a id="7850" href="present.html#7850" class="Bound">s</a> <a id="7852" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="7854" href="present.html#7854" class="Bound">p</a><a id="7855" class="Symbol">}</a> <a id="7857" href="present.html#7857" class="Bound">f</a> <a id="7859" href="present.html#7859" class="Bound">e</a> <a id="7861" href="present.html#7861" class="Bound">a</a> <a id="7863" class="Symbol">=</a> <a id="7865" href="present.html#7757" class="Function">sum</a>  <a id="7870" href="present.html#7857" class="Bound">f</a> <a id="7872" href="present.html#7859" class="Bound">e</a> <a id="7874" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="7876" href="present.html#3209" class="Function">map</a> <a id="7880" class="Symbol">(</a><a id="7881" href="present.html#7757" class="Function">sum</a> <a id="7885" href="present.html#7857" class="Bound">f</a> <a id="7887" href="present.html#7859" class="Bound">e</a><a id="7888" class="Symbol">)</a>
                                         <a id="7931" class="Symbol">(</a><a id="7932" href="present.html#2967" class="Function">nest</a> <a id="7937" href="present.html#7861" class="Bound">a</a><a id="7938" class="Symbol">)</a>
</pre>
<!--
<pre class="Agda">  <a id="7955" class="Keyword">open</a> <a id="7960" href="present.html#4555" class="Module">MMnaive</a> <a id="7968" href="present.html#7654" class="Bound Operator">_⊠_</a> <a id="7972" href="present.html#7672" class="Bound">ε</a> <a id="7974" href="present.html#7680" class="Bound Operator">_⊞_</a> <a id="7978" href="present.html#7757" class="Function">sum</a>
  <a id="7984" class="Keyword">open</a> <a id="7989" href="present.html#6732" class="Module">Blocked</a> <a id="7997" href="present.html#7654" class="Bound Operator">_⊠_</a> <a id="8001" href="present.html#7672" class="Bound">ε</a> <a id="8003" href="present.html#7680" class="Bound Operator">_⊞_</a> <a id="8007" href="present.html#7757" class="Function">sum</a>
</pre>-->
<pre class="Agda">  <a id="Proof.blocked-ok"></a><a id="8025" href="present.html#8025" class="Function">blocked-ok</a> <a id="8036" class="Symbol">:</a> <a id="8038" class="Symbol">(</a><a id="8039" href="present.html#8039" class="Bound">a</a> <a id="8041" class="Symbol">:</a> <a id="8043" href="present.html#2748" class="Function">Ar</a> <a id="8046" class="Symbol">(</a><a id="8047" href="present.html#2816" class="Generalizable">s</a> <a id="8049" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8051" href="present.html#2818" class="Generalizable">p</a><a id="8052" class="Symbol">)</a> <a id="8054" href="present.html#7660" class="Bound">X</a><a id="8055" class="Symbol">)</a> <a id="8057" class="Symbol">→</a> <a id="8059" class="Symbol">(</a><a id="8060" href="present.html#8060" class="Bound">b</a> <a id="8062" class="Symbol">:</a> <a id="8064" href="present.html#2748" class="Function">Ar</a> <a id="8067" class="Symbol">(</a><a id="8068" href="present.html#2818" class="Generalizable">p</a> <a id="8070" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8072" href="present.html#2820" class="Generalizable">q</a><a id="8073" class="Symbol">)</a> <a id="8075" href="present.html#7664" class="Bound">Y</a><a id="8076" class="Symbol">)</a>
             <a id="8091" class="Symbol">→</a> <a id="8093" href="present.html#7048" class="Function">mm</a> <a id="8096" href="present.html#8039" class="Bound">a</a> <a id="8098" href="present.html#8060" class="Bound">b</a> <a id="8100" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="8103" href="present.html#4726" class="Function">mm-canon</a> <a id="8112" href="present.html#8039" class="Bound">a</a> <a id="8114" href="present.html#8060" class="Bound">b</a>

  <a id="Proof.sum-commutes"></a><a id="8119" href="present.html#8119" class="Function">sum-commutes</a> <a id="8132" class="Symbol">:</a> <a id="8134" class="Symbol">(</a><a id="8135" href="present.html#8135" class="Bound">a</a> <a id="8137" class="Symbol">:</a> <a id="8139" href="present.html#2748" class="Function">Ar</a> <a id="8142" href="present.html#2816" class="Generalizable">s</a> <a id="8144" class="Symbol">(</a><a id="8145" href="present.html#2748" class="Function">Ar</a> <a id="8148" href="present.html#2818" class="Generalizable">p</a> <a id="8150" href="present.html#7668" class="Bound">Z</a><a id="8151" class="Symbol">))</a>
               <a id="8169" class="Symbol">→</a> <a id="8171" href="present.html#7757" class="Function">sum</a> <a id="8175" class="Symbol">(</a><a id="8176" href="present.html#3263" class="Function">zipWith</a> <a id="8184" href="present.html#7680" class="Bound Operator">_⊞_</a><a id="8187" class="Symbol">)</a> <a id="8189" class="Symbol">(</a><a id="8190" href="present.html#3179" class="Function">K</a> <a id="8192" href="present.html#7672" class="Bound">ε</a><a id="8193" class="Symbol">)</a> <a id="8195" href="present.html#8135" class="Bound">a</a>
                 <a id="8214" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="8217" class="Symbol">λ</a> <a id="8219" href="present.html#8219" class="Bound">i</a> <a id="8221" class="Symbol">→</a> <a id="8223" href="present.html#7757" class="Function">sum</a> <a id="8227" href="present.html#7680" class="Bound Operator">_⊞_</a> <a id="8231" href="present.html#7672" class="Bound">ε</a> <a id="8233" class="Symbol">λ</a> <a id="8235" href="present.html#8235" class="Bound">j</a> <a id="8237" class="Symbol">→</a> <a id="8239" href="present.html#8135" class="Bound">a</a> <a id="8241" href="present.html#2923" class="Function Operator">[</a> <a id="8243" href="present.html#8235" class="Bound">j</a> <a id="8245" href="present.html#2923" class="Function Operator">]</a> <a id="8247" href="present.html#2923" class="Function Operator">[</a> <a id="8249" href="present.html#8219" class="Bound">i</a> <a id="8251" href="present.html#2923" class="Function Operator">]</a>
</pre>
<!--
<pre class="Agda">  <a id="Proof.ιsuc"></a><a id="8268" href="present.html#8268" class="Function">ιsuc</a> <a id="8273" class="Symbol">:</a> <a id="8275" href="present.html#2663" class="Datatype">P</a> <a id="8277" class="Symbol">(</a><a id="8278" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="8280" href="present.html#2497" class="Generalizable">n</a><a id="8281" class="Symbol">)</a> <a id="8283" class="Symbol">→</a> <a id="8285" href="present.html#2663" class="Datatype">P</a> <a id="8287" class="Symbol">(</a><a id="8288" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="8290" class="Symbol">(</a><a id="8291" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="8295" href="present.html#2497" class="Generalizable">n</a><a id="8296" class="Symbol">))</a>
  <a id="8301" href="present.html#8268" class="Function">ιsuc</a> <a id="8306" class="Symbol">(</a><a id="8307" href="present.html#2683" class="InductiveConstructor">ι</a> <a id="8309" href="present.html#8309" class="Bound">i</a><a id="8310" class="Symbol">)</a> <a id="8312" class="Symbol">=</a> <a id="8314" href="present.html#2683" class="InductiveConstructor">ι</a> <a id="8316" class="Symbol">(</a><a id="8317" href="Data.Fin.Base.html#1188" class="InductiveConstructor">suc</a> <a id="8321" href="present.html#8309" class="Bound">i</a><a id="8322" class="Symbol">)</a>
  <a id="8326" href="present.html#7706" class="Function">sum₁</a> <a id="8331" class="Symbol">{</a><a id="8332" class="Argument">n</a> <a id="8334" class="Symbol">=</a> <a id="8336" href="Agda.Builtin.Nat.html#204" class="InductiveConstructor">zero</a><a id="8340" class="Symbol">}</a>   <a id="8344" href="present.html#8344" class="Bound">f</a> <a id="8346" href="present.html#8346" class="Bound">e</a> <a id="8348" href="present.html#8348" class="Bound">a</a> <a id="8350" class="Symbol">=</a> <a id="8352" href="present.html#8346" class="Bound">e</a>
  <a id="8356" href="present.html#7706" class="Function">sum₁</a> <a id="8361" class="Symbol">{</a><a id="8362" class="Argument">n</a> <a id="8364" class="Symbol">=</a> <a id="8366" href="Agda.Builtin.Nat.html#217" class="InductiveConstructor">suc</a> <a id="8370" href="present.html#8370" class="Bound">n</a><a id="8371" class="Symbol">}</a>  <a id="8374" href="present.html#8374" class="Bound">f</a> <a id="8376" href="present.html#8376" class="Bound">e</a> <a id="8378" href="present.html#8378" class="Bound">a</a> <a id="8380" class="Symbol">=</a> <a id="8382" href="present.html#8374" class="Bound">f</a> <a id="8384" class="Symbol">(</a><a id="8385" href="present.html#8378" class="Bound">a</a> <a id="8387" class="Symbol">(</a><a id="8388" href="present.html#2683" class="InductiveConstructor">ι</a> <a id="8390" href="Data.Fin.Base.html#1157" class="InductiveConstructor">zero</a><a id="8394" class="Symbol">))</a> <a id="8397" class="Symbol">(</a><a id="8398" href="present.html#7706" class="Function">sum₁</a> <a id="8403" href="present.html#8374" class="Bound">f</a> <a id="8405" href="present.html#8376" class="Bound">e</a> <a id="8407" class="Symbol">(</a><a id="8408" href="present.html#8378" class="Bound">a</a> <a id="8410" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="8412" href="present.html#8268" class="Function">ιsuc</a><a id="8416" class="Symbol">))</a>
  <a id="8421" href="present.html#8025" class="Function">blocked-ok</a> <a id="8432" class="Symbol">=</a> <a id="8434" href="present.html#2532" class="Postulate">⋯</a>
  <a id="8438" href="present.html#8119" class="Function">sum-commutes</a> <a id="8451" class="Symbol">=</a> <a id="8453" href="present.html#2532" class="Postulate">⋯</a>

</pre>-->
</section>
<section id="blocking-factors" class="slide level2">
<h2>Blocking Factors</h2>
<pre class="Agda">  <a id="Proof.flatten"></a><a id="8492" href="present.html#8492" class="Function">flatten</a> <a id="8500" class="Symbol">:</a> <a id="8502" href="present.html#2609" class="Datatype">S</a> <a id="8504" class="Symbol">→</a> <a id="8506" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
  <a id="8510" href="present.html#8492" class="Function">flatten</a> <a id="8518" class="Symbol">(</a><a id="8519" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="8521" href="present.html#8521" class="Bound">n</a><a id="8522" class="Symbol">)</a>   <a id="8526" class="Symbol">=</a> <a id="8528" href="present.html#8521" class="Bound">n</a>
  <a id="8532" href="present.html#8492" class="Function">flatten</a> <a id="8540" class="Symbol">(</a><a id="8541" href="present.html#8541" class="Bound">s</a> <a id="8543" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8545" href="present.html#8545" class="Bound">p</a><a id="8546" class="Symbol">)</a> <a id="8548" class="Symbol">=</a> <a id="8550" href="present.html#8492" class="Function">flatten</a> <a id="8558" href="present.html#8541" class="Bound">s</a> <a id="8560" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="8562" href="present.html#8492" class="Function">flatten</a> <a id="8570" href="present.html#8545" class="Bound">p</a>

  <a id="Proof._♭"></a><a id="8575" href="present.html#8575" class="Function Operator">_♭</a> <a id="8578" class="Symbol">:</a> <a id="8580" href="present.html#2609" class="Datatype">S</a> <a id="8582" class="Symbol">→</a> <a id="8584" href="present.html#2609" class="Datatype">S</a>
  <a id="8588" href="present.html#8588" class="Bound">s</a> <a id="8590" href="present.html#8575" class="Function Operator">♭</a>  <a id="8593" class="Symbol">=</a> <a id="8595" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="8597" class="Symbol">(</a><a id="8598" href="present.html#8492" class="Function">flatten</a> <a id="8606" href="present.html#8588" class="Bound">s</a><a id="8607" class="Symbol">)</a>

  <a id="Proof.♭-♭"></a><a id="8612" href="present.html#8612" class="Function">♭-♭</a> <a id="8616" class="Symbol">:</a> <a id="8618" class="Symbol">∀</a> <a id="8620" class="Symbol">{</a><a id="8621" href="present.html#8621" class="Bound">X</a><a id="8622" class="Symbol">}</a> <a id="8624" class="Symbol">→</a> <a id="8626" href="present.html#2748" class="Function">Ar</a> <a id="8629" class="Symbol">(</a><a id="8630" href="present.html#2816" class="Generalizable">s</a> <a id="8632" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8634" href="present.html#2818" class="Generalizable">p</a><a id="8635" class="Symbol">)</a> <a id="8637" href="present.html#8621" class="Bound">X</a> <a id="8639" class="Symbol">→</a> <a id="8641" href="present.html#2748" class="Function">Ar</a> <a id="8644" class="Symbol">(</a><a id="8645" href="present.html#2816" class="Generalizable">s</a> <a id="8647" href="present.html#8575" class="Function Operator">♭</a> <a id="8649" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8651" href="present.html#2818" class="Generalizable">p</a> <a id="8653" href="present.html#8575" class="Function Operator">♭</a><a id="8654" class="Symbol">)</a> <a id="8656" href="present.html#8621" class="Bound">X</a>
  <a id="Proof.♯-♯"></a><a id="8660" href="present.html#8660" class="Function">♯-♯</a> <a id="8664" class="Symbol">:</a> <a id="8666" class="Symbol">∀</a> <a id="8668" class="Symbol">{</a><a id="8669" href="present.html#8669" class="Bound">X</a><a id="8670" class="Symbol">}</a> <a id="8672" class="Symbol">→</a> <a id="8674" href="present.html#2748" class="Function">Ar</a> <a id="8677" class="Symbol">(</a><a id="8678" href="present.html#2816" class="Generalizable">s</a> <a id="8680" href="present.html#8575" class="Function Operator">♭</a> <a id="8682" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8684" href="present.html#2818" class="Generalizable">p</a> <a id="8686" href="present.html#8575" class="Function Operator">♭</a><a id="8687" class="Symbol">)</a> <a id="8689" href="present.html#8669" class="Bound">X</a> <a id="8691" class="Symbol">→</a> <a id="8693" href="present.html#2748" class="Function">Ar</a> <a id="8696" class="Symbol">(</a><a id="8697" href="present.html#2816" class="Generalizable">s</a> <a id="8699" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8701" href="present.html#2818" class="Generalizable">p</a><a id="8702" class="Symbol">)</a> <a id="8704" href="present.html#8669" class="Bound">X</a>

  <a id="8709" class="Comment">-- Assuming ⊞ is associative and ε is ⊞-neutral</a>
  <a id="Proof.mm-flat-ok"></a><a id="8759" href="present.html#8759" class="Function">mm-flat-ok</a> <a id="8770" class="Symbol">:</a> <a id="8772" class="Symbol">(</a><a id="8773" href="present.html#8773" class="Bound">a</a> <a id="8775" class="Symbol">:</a> <a id="8777" href="present.html#2748" class="Function">Ar</a> <a id="8780" class="Symbol">(</a><a id="8781" href="present.html#2816" class="Generalizable">s</a> <a id="8783" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8785" href="present.html#2818" class="Generalizable">p</a><a id="8786" class="Symbol">)</a> <a id="8788" href="present.html#7660" class="Bound">X</a><a id="8789" class="Symbol">)</a> <a id="8791" class="Symbol">(</a><a id="8792" href="present.html#8792" class="Bound">b</a> <a id="8794" class="Symbol">:</a> <a id="8796" href="present.html#2748" class="Function">Ar</a> <a id="8799" class="Symbol">(</a><a id="8800" href="present.html#2818" class="Generalizable">p</a> <a id="8802" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="8804" href="present.html#2820" class="Generalizable">q</a><a id="8805" class="Symbol">)</a> <a id="8807" href="present.html#7664" class="Bound">Y</a><a id="8808" class="Symbol">)</a>
             <a id="8823" class="Symbol">→</a> <a id="8825" href="present.html#4726" class="Function">mm-canon</a> <a id="8834" class="Symbol">(</a><a id="8835" href="present.html#8612" class="Function">♭-♭</a> <a id="8839" href="present.html#8773" class="Bound">a</a><a id="8840" class="Symbol">)</a> <a id="8842" class="Symbol">(</a><a id="8843" href="present.html#8612" class="Function">♭-♭</a> <a id="8847" href="present.html#8792" class="Bound">b</a><a id="8848" class="Symbol">)</a>
               <a id="8865" href="present.html#3366" class="Function Operator">≈ₐ</a> <a id="8868" href="present.html#8612" class="Function">♭-♭</a> <a id="8872" class="Symbol">(</a><a id="8873" href="present.html#4726" class="Function">mm-canon</a> <a id="8882" href="present.html#8773" class="Bound">a</a> <a id="8884" href="present.html#8792" class="Bound">b</a><a id="8885" class="Symbol">)</a>
</pre>
<!--
<pre class="Agda">  <a id="8902" href="present.html#8759" class="Function">mm-flat-ok</a> <a id="8913" class="Symbol">=</a> <a id="8915" href="present.html#2532" class="Postulate">⋯</a>
  <a id="8919" href="present.html#8660" class="Function">♯-♯</a> <a id="8923" class="Symbol">=</a> <a id="8925" href="present.html#2532" class="Postulate">⋯</a>
  <a id="8929" href="present.html#8612" class="Function">♭-♭</a> <a id="8933" class="Symbol">=</a> <a id="8935" href="present.html#2532" class="Postulate">⋯</a>
</pre>-->
</section>
<section id="emulating-sac" class="slide level2">
<h2>Emulating SaC</h2>
<pre class="Agda">  <a id="8969" class="Keyword">data</a> <a id="Proof.R"></a><a id="8974" href="present.html#8974" class="Datatype">R</a> <a id="8976" class="Symbol">:</a> <a id="8978" href="present.html#2609" class="Datatype">S</a> <a id="8980" class="Symbol">→</a> <a id="8982" href="present.html#2609" class="Datatype">S</a> <a id="8984" class="Symbol">→</a> <a id="8986" href="present.html#2609" class="Datatype">S</a> <a id="8988" class="Symbol">→</a> <a id="8990" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="8994" class="Keyword">where</a>
    <a id="Proof.R.ι"></a><a id="9004" href="present.html#9004" class="InductiveConstructor">ι</a>  <a id="9007" class="Symbol">:</a> <a id="9009" href="present.html#8974" class="Datatype">R</a> <a id="9011" class="Symbol">(</a><a id="9012" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9014" href="present.html#2495" class="Generalizable">m</a> <a id="9016" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9018" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9020" href="present.html#2497" class="Generalizable">n</a><a id="9021" class="Symbol">)</a> <a id="9023" class="Symbol">(</a><a id="9024" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9026" href="present.html#2497" class="Generalizable">n</a> <a id="9028" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9030" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9032" href="present.html#2499" class="Generalizable">k</a><a id="9033" class="Symbol">)</a> <a id="9035" class="Symbol">(</a><a id="9036" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9038" href="present.html#2495" class="Generalizable">m</a> <a id="9040" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9042" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9044" href="present.html#2499" class="Generalizable">k</a><a id="9045" class="Symbol">)</a>
    <a id="Proof.R.σ"></a><a id="9051" href="present.html#9051" class="InductiveConstructor">σ</a>  <a id="9054" class="Symbol">:</a> <a id="9056" href="present.html#8974" class="Datatype">R</a> <a id="9058" href="present.html#2816" class="Generalizable">s</a> <a id="9060" href="present.html#2818" class="Generalizable">p</a> <a id="9062" href="present.html#2820" class="Generalizable">q</a>
       <a id="9071" class="Symbol">→</a> <a id="9073" href="present.html#8974" class="Datatype">R</a> <a id="9075" class="Symbol">((</a><a id="9077" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9079" href="present.html#2495" class="Generalizable">m</a> <a id="9081" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9083" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9085" href="present.html#2497" class="Generalizable">n</a><a id="9086" class="Symbol">)</a> <a id="9088" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9090" href="present.html#2816" class="Generalizable">s</a><a id="9091" class="Symbol">)</a> <a id="9093" class="Symbol">((</a><a id="9095" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9097" href="present.html#2497" class="Generalizable">n</a> <a id="9099" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9101" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9103" href="present.html#2499" class="Generalizable">k</a><a id="9104" class="Symbol">)</a> <a id="9106" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9108" href="present.html#2818" class="Generalizable">p</a><a id="9109" class="Symbol">)</a> 
           <a id="9123" class="Symbol">((</a><a id="9125" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9127" href="present.html#2495" class="Generalizable">m</a> <a id="9129" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9131" href="present.html#2625" class="InductiveConstructor">ι</a> <a id="9133" href="present.html#2499" class="Generalizable">k</a><a id="9134" class="Symbol">)</a> <a id="9136" href="present.html#2640" class="InductiveConstructor Operator">⊗</a> <a id="9138" href="present.html#2820" class="Generalizable">q</a><a id="9139" class="Symbol">)</a>

  <a id="Proof.mmx"></a><a id="9144" href="present.html#9144" class="Function">mmx</a> <a id="9148" class="Symbol">:</a> <a id="9150" href="present.html#8974" class="Datatype">R</a> <a id="9152" href="present.html#2816" class="Generalizable">s</a> <a id="9154" href="present.html#2818" class="Generalizable">p</a> <a id="9156" href="present.html#2820" class="Generalizable">q</a> <a id="9158" class="Symbol">→</a> <a id="9160" href="present.html#2748" class="Function">Ar</a> <a id="9163" href="present.html#2816" class="Generalizable">s</a> <a id="9165" href="present.html#7660" class="Bound">X</a> <a id="9167" class="Symbol">→</a> <a id="9169" href="present.html#2748" class="Function">Ar</a> <a id="9172" href="present.html#2818" class="Generalizable">p</a> <a id="9174" href="present.html#7664" class="Bound">Y</a> <a id="9176" class="Symbol">→</a> <a id="9178" href="present.html#2748" class="Function">Ar</a> <a id="9181" href="present.html#2820" class="Generalizable">q</a> <a id="9183" href="present.html#7668" class="Bound">Z</a>
  <a id="9187" href="present.html#9144" class="Function">mmx</a> <a id="9191" href="present.html#9004" class="InductiveConstructor">ι</a>      <a id="9198" href="present.html#9198" class="Bound">a</a> <a id="9200" href="present.html#9200" class="Bound">b</a> <a id="9202" class="Symbol">=</a> <a id="9204" href="present.html#4726" class="Function">mm-canon</a> <a id="9213" href="present.html#9198" class="Bound">a</a> <a id="9215" href="present.html#9200" class="Bound">b</a>
  <a id="9219" href="present.html#9144" class="Function">mmx</a> <a id="9223" class="Symbol">(</a><a id="9224" href="present.html#9051" class="InductiveConstructor">σ</a> <a id="9226" href="present.html#9226" class="Bound">r</a><a id="9227" class="Symbol">)</a>  <a id="9230" href="present.html#9230" class="Bound">a</a> <a id="9232" href="present.html#9232" class="Bound">b</a> <a id="9234" class="Symbol">=</a> <a id="9236" class="Keyword">let</a>
    <a id="9244" href="present.html#9244" class="Bound">a′</a> <a id="9247" class="Symbol">=</a> <a id="9249" href="present.html#2967" class="Function">nest</a> <a id="9254" href="present.html#9230" class="Bound">a</a>
    <a id="9260" href="present.html#9260" class="Bound">b′</a> <a id="9263" class="Symbol">=</a> <a id="9265" href="present.html#2967" class="Function">nest</a> <a id="9270" href="present.html#9232" class="Bound">b</a>
    <a id="9276" href="present.html#9276" class="Bound">c′</a> <a id="9279" class="Symbol">=</a> <a id="9281" class="Symbol">λ</a> <a id="9283" class="Symbol">{</a> <a id="9285" class="Symbol">(</a><a id="9286" href="present.html#9286" class="Bound">i</a> <a id="9288" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="9290" href="present.html#9290" class="Bound">j</a><a id="9291" class="Symbol">)</a> <a id="9293" class="Symbol">→</a> 
             <a id="9309" href="present.html#7757" class="Function">sum</a> <a id="9313" class="Symbol">(</a><a id="9314" href="present.html#3263" class="Function">zipWith</a> <a id="9322" href="present.html#7680" class="Bound Operator">_⊞_</a><a id="9325" class="Symbol">)</a> <a id="9327" class="Symbol">(</a><a id="9328" href="present.html#3179" class="Function">K</a> <a id="9330" href="present.html#7672" class="Bound">ε</a><a id="9331" class="Symbol">)</a>
                 <a id="9350" class="Symbol">λ</a> <a id="9352" href="present.html#9352" class="Bound">k</a> <a id="9354" class="Symbol">→</a> <a id="9356" href="present.html#9144" class="Function">mmx</a> <a id="9360" href="present.html#9226" class="Bound">r</a> <a id="9362" class="Symbol">(</a><a id="9363" href="present.html#9244" class="Bound">a′</a> <a id="9366" href="present.html#2923" class="Function Operator">[</a> <a id="9368" href="present.html#9286" class="Bound">i</a> <a id="9370" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="9372" href="present.html#9352" class="Bound">k</a> <a id="9374" href="present.html#2923" class="Function Operator">]</a><a id="9375" class="Symbol">)</a>
                             <a id="9406" class="Symbol">(</a><a id="9407" href="present.html#9260" class="Bound">b′</a> <a id="9410" href="present.html#2923" class="Function Operator">[</a> <a id="9412" href="present.html#9352" class="Bound">k</a> <a id="9414" href="present.html#2708" class="InductiveConstructor Operator">⊗</a> <a id="9416" href="present.html#9290" class="Bound">j</a> <a id="9418" href="present.html#2923" class="Function Operator">]</a><a id="9419" class="Symbol">)</a> <a id="9421" class="Symbol">}</a>
    <a id="9427" class="Keyword">in</a> <a id="9430" href="present.html#3029" class="Function">unnest</a> <a id="9437" href="present.html#9276" class="Bound">c′</a>
</pre>
</section></section>
<section id="conclusions" class="title-slide slide level1">
<h1>Conclusions</h1>
<ul>
<li>Rank-polymorphic array theory</li>
<li>Blocking as induction over shape structure</li>
<li>Correctness guarantees</li>
<li>Extraction into existing array languages for performance</li>
</ul>
</section>

<section id="thank-you" class="title-slide slide level1">
<h1>Thank you</h1>

</section>
    </div>
  </div>

  <script src="https://unpkg.com/reveal.js@^4//dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="https://unpkg.com/reveal.js@^4//plugin/notes/notes.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/search/search.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/zoom/zoom.js"></script>
  <script src="https://unpkg.com/reveal.js@^4//plugin/math/math.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'linear',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 960,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [
          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
